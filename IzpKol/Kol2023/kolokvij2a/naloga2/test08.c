#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {5740, 165, 1261, 4924, 9464, 6228, 5316, 2178, 5668, 4055, 243, 8396, 1168, 2572, 8287, 4217, 9864, 8471, 5906, 7387, 5647, 7989, 9327, 9338, 9088, 7796, 3693, 255, 2146, 4396, 2071, 7083, 6009, 7529, 6606, 4161, 5216, 3072};
int _B[] = {5571, 9278, 8452, 4929, 6755, 3101, 1663, 8964, 607, 4273, 4631, 2273, 6866, 3398, 9327, 1619, 3487, 9908, 5611, 4642, 2074, 507, 4132, 2024, 6780, 6045, 9995, 8289, 9680, 1844, 6699, 2282, 923, 907, 5336, 6674, 8193, 5948, 8200, 3732, 5675, 4433, 1360, 9162, 6205, 2160, 4251, 2081, 459, 2880, 8325, 880, 2268, 9990, 2297, 3004, 4167, 1744, 5884, 5470, 9301, 7638, 7247, 775, 7065, 7565, 8361, 9989, 7575, 4410, 4454, 2887, 5206, 5875, 1652, 7795, 1330, 6065, 3640, 2539, 8111, 4303, 6732, 4731, 3236, 1915, 7767, 4113, 2947, 914, 7497, 7748, 3739, 9392, 4895, 4271, 9356, 4161, 5740, 9843, 8569, 2363, 5779, 6172, 8355, 7294, 6652, 618, 1101, 9965, 8179, 8419, 5653, 3759, 5434, 3437, 3178, 9057, 3056, 5140, 7055, 4329, 7962, 8358, 9970, 8337, 4185, 5407, 366, 9864, 6951, 8602, 9047, 2126, 3827, 518, 537, 6195, 5923, 1369, 9009, 3191, 7279, 2238, 7090, 8404, 7667, 3961, 646, 5275, 5677, 6718, 345, 781, 6009, 494, 2808, 4778, 5574, 5197, 8662, 5173, 7306, 8363, 5342, 5823, 4858, 8942, 9258, 4252, 6339, 6495, 422, 5888, 2583, 6245, 3451, 9556, 6466, 6370, 8066, 5883, 7830, 7980, 6774, 523, 6066, 2530, 7558, 3025, 1013, 3934, 8953, 1402, 1111, 1701, 8835, 5323, 3669, 9873, 9276, 9020, 6615, 8724, 7593, 3278, 8551, 3042, 530, 2011, 119, 6758, 2831, 27, 526, 3049, 4587, 2484, 759, 89, 6885, 9780, 4166, 7099, 7855, 1261, 5714, 7602, 4253, 5977, 8711, 6197, 1738, 1167, 3016, 6789, 5493, 414, 3296, 2202, 6431, 8497, 3622, 2926, 25, 9484, 442, 2108, 5791, 8279, 7745, 5372, 8654, 5691, 6174, 8240, 8143, 7771, 4922, 4323, 3322, 4672, 2393, 1124, 7298, 2570, 2323, 988, 4248, 6281, 8150, 85, 3635, 7485, 6539, 2534, 1193, 3973, 2823, 2965, 8814, 680, 4196, 6648, 5423, 7208, 9232, 6060, 165, 5614, 2314, 9862, 5742, 1995, 5515, 3712, 483, 7837, 6566, 7863, 791, 3185, 9304, 3818, 6442, 754, 8597, 6544, 8729, 8931, 6576, 7758, 7864, 2367, 5456, 1908, 2252, 7469, 9410, 2399, 2422, 4793, 6214, 7851, 622, 7316, 2137, 6062, 3239, 9362, 6362, 9745, 1835, 2540, 3439, 1627, 8075, 8706, 3625, 9590, 2622, 8320, 8418, 5273, 9978, 3121, 8106, 7660, 5522, 9569, 6950, 9893, 240, 1284, 9768, 772, 5089, 6092, 6986, 3790, 5175, 7338, 5000, 469, 6269, 2921, 6471, 6572, 6540, 4702, 617, 587, 9387, 225, 6333, 330, 5978, 5211, 5607, 9118, 2178, 8460, 7700, 7515, 4156, 1589, 798, 9124, 6305, 4649, 3572, 6408, 786, 1029, 8038, 7568, 8672, 5414, 8745, 5986, 1068, 2058, 5244, 1510, 4182, 4459, 589, 2970, 4114, 8402, 3204, 1053, 9754, 1153, 5428, 2903, 61, 2180, 2088, 5271, 4165, 2827, 9342, 9341, 8014, 4997, 1590, 9878, 8266, 1944, 7391, 9288, 84, 964, 7687, 6848, 3661, 8674, 9383, 675, 3380, 55, 8412, 498, 9332, 144, 852, 6561, 8567, 8410, 1765, 3100, 3479, 2090, 2636, 699, 1527, 1588, 8195, 7878, 5807, 6667, 7754, 1921, 4001, 1746, 4129, 9013, 2757, 4825, 6518, 4104, 6954, 5570, 5484, 8644, 6486, 1375, 7689, 4537, 4474, 4403, 8746, 8184, 8462, 4227, 7072, 3660, 4884, 6955, 300, 8471, 7819, 1105, 7068, 4211, 832, 4045, 3306, 1416, 3182, 4424, 215, 2212, 3630, 7659, 7387, 6636, 2960, 5477, 8527, 6614, 1217, 1404, 7475, 872, 23, 5022, 7319, 4120, 7162, 8214, 6388, 906, 2334, 325, 5113, 6109, 5463, 669, 8241, 7577, 9757, 5869, 3735, 5246, 2130, 9229, 5264, 2555, 8327, 760, 1971, 2779, 5861, 588, 885, 7692, 8571, 5199, 3027, 2432, 2103, 6589, 5366, 7695, 6567, 2948, 5374, 7215, 5488, 8304, 8176, 4935, 1318, 5860, 4730, 6406, 9571, 2240, 1528, 4245, 4277, 6993, 9851, 1600, 5479, 5557, 8861, 6966, 9703, 2747, 9763, 8801, 7697, 748, 5979, 7963, 875, 9394, 9375, 4917, 7629, 8476, 6311, 7650, 9453, 8311, 6819, 5613, 8313, 873, 4257, 8396, 1082, 7301, 6658, 6450, 9021, 4758, 496, 629, 9264, 1596, 9920, 5572, 8231, 723, 9876, 6393, 8076, 6417, 8842, 4861, 6268, 8382, 9998, 2688, 1660, 628, 6239, 4413, 9885, 1870, 5588, 3962, 7499, 1887, 9542, 3067, 8760, 3059, 5919, 9816, 6126, 7984, 5190, 5519, 3652, 9149, 1578, 255, 2370, 1085, 1800, 7067, 3763, 114, 3909, 302, 6240, 1998, 6610, 6210, 4258, 9208, 5499, 3298, 5009, 9496, 4636, 9993, 4194, 3363, 9052, 301, 5032, 912, 9515, 5793, 7460, 1295, 3283, 6851, 8794, 6054, 9712, 6507, 6938, 9663, 9158, 5330, 7203, 1349, 9270, 7218, 8539, 7798, 5364, 9478, 4903, 6101, 5910, 6287, 1918, 815, 4664, 8925, 7662, 8006, 5785, 6452, 3836, 528, 9765, 7437, 5316, 8234, 8422, 7336, 720, 968, 7248, 8510, 6227, 4838, 4912, 6627, 4306, 9098, 195, 4785, 2344, 2826, 4763, 4074, 7230, 2881, 9280, 1961, 7385, 2635, 5006, 9361, 4835, 4948, 6618, 3564, 7046, 1045, 2598, 8743, 1339, 9338, 50, 1693, 9443, 6985, 8450, 9517, 7796, 4147, 6080, 3226, 4354, 5156, 6884, 8007, 51, 428, 3484, 9706, 5821, 970, 5670, 4015, 4841, 5441, 4170, 9697, 298, 558, 2494, 5018, 7317, 6745, 1120, 4381, 6161, 2468, 9470, 486, 8501, 4209, 6803, 5647, 4021, 4913, 867, 9454, 3000, 4068, 7110, 4558, 531, 6631, 4469, 219, 2551, 6596, 6336, 2262, 7324, 6063, 3895, 5973, 6505, 5028, 2476, 8579, 3248, 1270, 7772, 2406, 3492, 6512, 8469, 2595, 5237, 9314, 9782, 9897, 4317, 8673, 2727, 4614, 6395, 927, 8647, 5855, 54, 2969, 3305, 7450, 7001, 1958, 3157, 9421, 5697, 9396, 8927, 1608, 6228, 248, 8001, 5601, 7529, 9464, 4174, 8823, 2244, 2087, 4102, 3589, 9062, 5214, 2737, 3392, 7185, 6427, 2995, 713, 6633, 4388, 5802, 8888, 5592, 4621, 1686, 7367, 3131, 2077, 2384, 6491, 8069, 1380, 3703, 495, 2293, 8752, 7516, 9713, 137, 5968, 4402, 8468, 9103, 349, 9856, 2413, 5104, 856, 8651, 7860, 6934, 1863, 4714, 3684, 1409, 2577, 2350, 4151, 3160, 7236, 9613, 5234, 555, 2874, 1278, 7600, 6944, 384, 8702, 9610, 8728, 8845, 8178, 2604, 473, 5796, 2129, 9538, 4421, 1696, 984, 8287, 5595, 718, 9488, 9644, 4571, 3525, 9983, 8170, 953, 170, 1782, 3134, 7280, 4594, 7973, 891, 5285, 2732, 5483, 7716, 9735, 4601, 3521, 9520, 5600, 4461, 7352, 4337, 5293, 1298, 8826, 9348, 9566, 8413, 8739, 7261, 2419, 3090, 481, 5668, 3857, 2443};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
