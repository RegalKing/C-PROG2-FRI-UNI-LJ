#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {3982, 9276, 4207, 9349, 9407, 6598, 8387, 8391, 1447, 3453, 5682, 1122, 4363, 7449, 1121, 9076, 6791, 9124, 845, 3329, 2168, 3798, 566, 5615, 2052, 510, 3, 9185, 2577, 3320, 2177, 1456, 1968, 7198, 150, 3581, 6594, 4372, 940, 9944, 1149, 1839, 8598, 9595, 3462, 8917, 3096, 6640, 6329, 7143, 9155, 6348, 730, 191, 3595, 9903, 8034, 1108, 5688, 2829, 3027, 5403, 7553, 1205, 9219};
int _B[] = {4528, 1208, 6791, 7952, 6043, 2491, 5574, 7680, 7396, 2376, 1537, 421, 9214, 5190, 2229, 6923, 6075, 6910, 2577, 4752, 4887, 9903, 4263, 4649, 6066, 5450, 2768, 6300, 3027, 2314, 545, 1930, 7366, 4828, 1223, 4261, 9407, 9002, 4868, 5345, 5709, 7065, 3541, 4138, 9875, 5109, 9288, 5665, 3565, 5833, 4030, 8134, 9390, 7321, 2068, 1157, 1021, 3872, 9729, 7966, 4969, 7740, 935, 4925, 5935, 4604, 9161, 7283, 8749, 3035, 1252, 3150, 3948, 3269, 2829, 9434, 1851, 1942, 6062, 7823, 7247, 5041, 1022, 2656, 5797, 198, 7998, 9620, 2867, 9621, 1443, 4349, 497, 6565, 7702, 1102, 8661, 2220, 4372, 5688, 4386, 3423, 1933, 3974, 9399, 778, 2621, 1441, 9380, 432, 6934, 5551, 5356, 8188, 2755, 3613, 1261, 5663, 1456, 1646, 3524, 1159, 4398, 2567, 8061, 7657, 8886, 1393, 7960, 1242, 2075, 4571, 5517, 1518, 4157, 3366, 5369, 7395, 9953, 6503, 3415, 2810, 4565, 7015, 5691, 7926, 6331, 9076, 163, 4995, 8720, 4638, 6348, 9021, 3838, 3230, 1502, 7806, 322, 6688, 4589, 5572, 2954, 4246, 4533, 3722, 1968, 6945, 6443, 8120, 6640, 2383, 9349, 5433, 1526, 4647, 4933, 8659, 1573, 8391, 7691, 2102, 1302, 4198, 3612, 3140, 5570, 9124, 8008, 1798, 2814, 3947, 463, 1466, 8595, 4962, 9185, 7307, 9959, 569, 6489, 6898, 6989, 3598, 1272, 9506, 7456, 9006, 4239, 5454, 180, 1351, 9357, 5856, 7946, 9453, 5172, 3329, 388, 7813, 2196, 9387, 6469, 3542, 2371, 1171, 5295, 7991, 3484, 8100, 9511, 4296, 8868, 2321, 1122, 7732, 7652, 9595, 8481, 9028, 2769, 1887, 221, 8513, 9652, 1009, 1121, 3429, 8736, 3462, 2238, 8454, 609, 833, 6848, 5069, 5351, 3096, 815, 7687, 5046, 6329, 6400, 1454, 24, 8098, 6624, 8574, 9276, 1846, 9664, 2808, 8761, 9707, 940, 6813, 1484, 3508, 4566, 6253, 2221, 2459, 3547, 1524, 6852, 4173, 8009, 1093, 206, 2904, 5496, 9001, 9727, 5869, 289, 6799, 3433, 6486, 556, 626, 8070, 5614, 3372, 7293, 3633, 4067, 9935, 6642, 4728, 6543, 8127, 2804, 594, 5699, 8708, 6074, 7063, 7075, 8150, 6219, 305, 2327, 9118, 8649, 6724, 7576, 9189, 3801, 4170, 6087, 504, 1423, 3795, 9397, 3719, 6385, 1348, 3996, 9718, 1202, 6002, 7973, 1571, 4207, 6949, 9127, 9439, 8558, 1447, 2278, 1078, 6081, 3186, 4508, 150, 9442, 7620, 2999, 873, 7009, 6257, 7315, 7951, 63, 1395, 4741, 6000, 1928, 1134, 6117, 3798, 7415, 93, 439, 2718, 515, 5557, 7476, 8386, 5707, 7256, 4080, 9790, 7445, 8059, 6033, 4248, 9609, 6361, 8162, 9895, 2204, 5916, 7006, 1763, 3434, 7863, 701, 7225, 5243, 4792, 3345, 3279, 4187, 7798, 1047, 6626, 7713, 4865, 2863, 2085, 2906, 4454, 4836, 3405, 6540, 8446, 566, 900, 9906, 9155, 4635, 7905, 6598, 81, 8387, 225, 6326, 8368, 9647, 6962, 7553, 7693, 510, 3197, 7509, 6422, 3888, 4892, 8629, 2313, 2145, 5311, 3002, 6889, 2845, 5615, 2087, 7847, 7029, 7229, 3540, 7230, 8876, 2177, 9358, 5965, 9492, 7485, 1808, 3254, 208, 9253, 8814, 2253, 7146, 3320, 2767, 1015, 4749, 8034, 7633, 2168, 8136, 8064, 6318, 9038, 7339, 2812, 5504, 175, 5541, 1683, 4241, 4488, 647, 9936, 6584, 3727, 2486, 3520, 9290, 1916, 8293, 1416, 2903, 9723, 8711, 7760, 4297, 2626, 283, 437, 1993, 6438, 1096, 65, 5804, 930, 2918, 7619, 1839, 7236, 230, 2771, 3883, 4255, 2169, 5682, 2781, 3483, 1604, 4711, 5449, 2052, 2571, 9792, 6594, 670, 5347, 7839, 7253, 9361, 9961, 7449, 2993, 7241, 4975, 7214, 3911, 3075, 5858, 5594, 5643, 5693, 3137, 3359, 278, 8630, 8847, 7922, 7684, 4283, 6240, 7838, 7050, 1999, 6575, 1374, 1831, 7191, 3626, 191, 1593, 9098, 8598, 2612, 9601, 7788, 2205, 5256, 1431, 9057, 3654, 2632, 6697, 9256, 8090, 2963, 8920, 1873, 3086, 5008, 9468, 6692, 8828, 3595, 254, 3849, 2865, 5971, 8911};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
