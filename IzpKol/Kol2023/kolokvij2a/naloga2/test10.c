#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {7661, 1210, 5795, 4807, 601, 7286, 4723, 6174, 2365, 6644, 289, 3644, 3876, 9042, 3543, 2717, 2230, 4801, 8256, 17, 9194, 7341, 4032, 889, 1761, 9837, 5556, 1276, 6210, 3480, 8941, 2921, 6956, 2021, 6630, 5589, 557, 2220, 9719, 284, 5864, 3063, 8926, 8864, 2977, 4483, 4536, 7167, 4111, 1571, 8278, 2310, 8377, 937, 5229, 2983, 7706, 2728, 77, 1183, 6452, 5989, 4104, 909, 1403, 528, 130, 1217, 6043, 3390, 7109, 7079, 9963, 5452, 6249, 7329, 3572, 3314, 9457, 3047, 3346, 6537, 7749, 6863, 9073, 3452, 6097, 7635, 777, 3138, 5764, 5923, 8150, 4411, 2948, 1285, 6933, 4028, 9332, 3254, 6542, 6772, 9077, 5846, 3303, 430, 8326, 9926, 8134, 4518, 968, 6455, 3800, 4662, 691, 8078, 7393, 6894, 986, 6652, 6410, 6720, 2719, 9705, 8292, 3576, 7883, 2117, 8698, 3405, 498, 6134, 2527, 1536, 4222, 8287, 5967, 5727, 2798, 6645, 2333, 7113, 4188, 2917, 6742, 3162, 4995, 8411, 8381, 1046, 8568, 1790, 7169, 5054, 6259, 570, 4597, 831, 4692, 7311, 6613, 4521, 4029, 1138, 2909, 8944, 8401, 7745, 2702, 611, 57, 4023, 8044, 8815, 1259, 4144, 2577, 5274, 6557, 7317, 1547, 7249, 8891, 8182, 6161, 4824, 4341, 9200, 1835, 5673, 5732, 2412, 9936, 6944, 633, 1402, 4829, 6617, 6297, 6967, 9274, 7672, 472, 7295, 7105, 8622, 8330, 1322, 5730, 8137, 295, 3328, 5606, 4684, 439, 8900, 1243, 8271, 4212, 8054, 5142, 2579, 6285, 1602, 102, 7608, 6790, 8293, 7831, 6980, 4482, 8316, 6266, 4275, 755, 2518, 5303, 5919, 7846, 2789, 4953, 7197, 6883, 9466, 8691, 6983, 9701, 4960, 2179, 8686, 2559, 3359, 3960, 2212, 7898, 5467, 3078, 9641, 1015, 8169, 1517, 6381, 3199, 4911, 514, 6634, 9118, 2387, 609, 4616, 2033, 1741, 2240, 9426, 8148, 6083, 4363, 296, 2075, 7913, 9646, 5494, 4005, 407, 1895, 4340, 263, 5807, 1530, 7760, 3662, 3228, 2440, 3965, 4332, 2989, 7018, 9324, 8104, 3972, 8834, 5637, 6456, 8854, 3962, 7671, 8950, 9924, 6085, 6264, 4526, 6978, 9593, 8062, 1997, 645, 6817, 6038, 1263, 6826, 6141, 1241, 5115, 7610, 4510, 2545, 3770, 1964, 6483, 5548, 1370, 3232, 1121, 7660, 923, 8928, 1123, 9095, 6896, 8874, 9650, 4380, 5543, 2267, 8431, 496, 313, 4812, 394, 5223, 6589, 858, 3237, 1479, 4325, 4781, 3109, 5590, 8419, 7439, 5959, 1734, 9696, 7328, 5849, 3647, 4988, 7025, 449, 3862, 6546, 194, 5464, 5029, 6491, 6702, 9584, 6006, 4542, 3465, 4660, 105, 8544, 2912, 8965, 4286, 4803, 5844, 8885, 4454, 225, 2364, 8705, 8139, 3732, 5011, 8985, 5197, 7008, 3381, 8914, 5220, 7730, 5652, 7153, 646, 4152, 5138, 4504, 7639, 519, 7857, 237, 6087, 871, 2096, 3425, 3217, 254, 5672, 2761, 5007, 1819, 1982, 8809, 3323, 5126, 955, 5714, 8507, 6498, 7512, 8681, 5739, 7436, 1656, 6215, 3079, 5192, 272, 4126, 9335, 6421, 5112, 748, 7312, 766, 9399, 8700, 2409, 8536, 3726, 5246, 2630, 9764, 6037, 524, 3062, 5636, 6051, 5147, 9619, 2089, 9927, 2517, 7570, 1745, 4546, 7036, 789, 2128, 3352, 9120, 2773, 4641, 5084, 2464, 6547, 5893, 4590, 136, 635, 6160, 4344, 210, 2932, 1667, 6636, 3315, 584, 8307, 3339, 9303, 4695, 1794, 6921, 6837, 3585, 1838, 7889, 5743, 1175, 3212, 4224, 4410, 5687, 8512, 2967, 9098, 2797, 4563, 7762, 3258, 6497, 917, 4707, 8094, 3006, 6677, 6931, 743, 4103, 3379, 3888, 4864, 7908, 5630, 3070, 8850, 5188, 7307, 7942, 4907, 8519, 1949, 5292, 2784, 3089, 5097, 6910, 3277, 9903, 8788, 8004, 5048, 8485, 2200, 1574, 5544, 4726, 9782, 5681, 9988, 2908, 9206, 99, 2218, 3389, 7932, 5517, 9488, 7545, 8059, 653, 3298, 6641, 8482, 1440, 3857, 501, 7835, 6206, 3740, 863, 5998, 1199, 6165, 3015, 6512, 8633, 16, 3501, 8668, 9623, 1993, 5674, 399, 6202, 3009, 247, 2013, 8065, 5302, 7705, 6148, 6965, 2046, 5079, 5997, 7288, 8765, 9342, 6057, 1537, 7748, 9824, 5810, 5929, 9471, 1714, 7448, 5194, 2373, 5433, 7802, 3807, 6905, 7085, 4621, 9874, 1786, 7549, 2348, 5900, 1073, 6226, 622, 4394, 4826, 6046, 1688, 942, 7985, 2055, 1338, 9034, 4800, 7501, 2696, 1063, 9249, 4992, 95, 7508, 5942, 3019, 291, 3032, 7190, 1609, 5806, 7208, 9027, 1380, 8190, 9500};
int _B[] = {9229, 9274, 3082, 1259, 3599, 5867, 8148, 2177, 6738, 8377, 2450, 7785, 5351, 992, 9530, 8250, 4344, 6564, 7600, 7501, 9708, 8970, 8947, 6128, 2721, 6441, 6462, 8956, 4300, 7660, 766, 8485, 347, 8885, 4321, 9650, 6495, 4616, 5613, 4128, 6017, 3228, 48, 4091, 6677, 556, 1936, 1044, 8727, 6772, 3405, 1984, 2096, 6579, 263, 9572, 9233, 8325, 1838, 7663, 8076, 8705, 1685, 7105, 8757, 5730, 8321, 1215, 6329, 4864, 6037, 3013, 6507, 7566, 3352, 2479, 9073, 8482, 345, 2882, 681, 7709, 5394, 2486, 3368, 5732, 4794, 6160, 917, 6165, 5526, 955, 8173, 8449, 3226, 2726, 2518, 5293, 1770, 7868, 702, 3571, 130, 2040, 4286, 2769, 8097, 9265, 4877, 5740, 5129, 6580, 3576, 5757, 9612, 9225, 2299, 8155, 3882, 5984, 3217, 897, 7730, 3016, 4200, 7071, 863, 9095, 5391, 9999, 2719, 102, 4641, 8691, 9656, 3071, 210, 6612, 3006, 7365, 8190, 7760, 6303, 2464, 5467, 4599, 8304, 5606, 6087, 17, 5874, 2153, 4018, 384, 5264, 289, 842, 2908, 9691, 2046, 272, 9520, 2224, 2793, 8933, 8859, 9042, 4394, 381, 3032, 2886, 2921, 6398, 5007, 2797, 5249, 2989, 6674, 4781, 1609, 9526, 1105, 6073, 2387, 8324, 8340, 1577, 1138, 7353, 4314, 7898, 4421, 6133, 5733, 4767, 4418, 8287, 2437, 7208, 8698, 2365, 1669, 3644, 6573, 4812, 9267, 6491, 7531, 5523, 3063, 5419, 3319, 2866, 745, 9737, 6736, 4659, 831, 5440, 9187, 528, 4173, 6424, 3390, 7439, 1494, 683, 8616, 2784, 1989, 6238, 5610, 5463, 2848, 6762, 2909, 3162, 6229, 2642, 5054, 6644, 5844, 8465, 3297, 2702, 4279, 5182, 5563, 6285, 1342, 394, 3845, 3662, 7780, 1766, 4156, 4758, 5544, 8914, 9328, 4275, 1217, 6348, 8619, 7953, 3388, 254, 1913, 9465, 6748, 2993, 741, 6512, 1565, 7153, 900, 4029, 7912, 125, 6007, 9952, 302, 9865, 5593, 2581, 3494, 5452, 6315, 5162, 3770, 4332, 5892, 4102, 6921, 6617, 1841, 7341, 1790, 3370, 5971, 5315, 4028, 7883, 7749, 5830, 1949, 4759, 6173, 7835, 1815, 5807, 7167, 350, 331, 593, 5607, 7307, 8381, 8954, 857, 2664, 7008, 9961, 8856, 5667, 2475, 6790, 9043, 8401, 6910, 1046, 7079, 8307, 8864, 7481, 5649, 3401, 531, 6417, 9621, 3694, 619, 8328, 1941, 1660, 2932, 5923, 3645, 3742, 2332, 7259, 8550, 7889, 247, 2789, 832, 4709, 5173, 8985, 5998, 3019, 2948, 7886, 4707, 7540, 8388, 4494, 1170, 7215, 969, 1133, 6606, 1979, 7779, 4229, 5997, 1241, 3396, 9629, 2930, 1423, 7165, 1481, 4340, 1746, 6595, 3005, 1440, 4363, 957, 6988, 496, 4144, 6035, 713, 3546, 1755, 7849, 8846, 7210, 5556, 8639, 5428, 8128, 2021, 9509, 9644, 6983, 2346, 2148, 4854, 9032, 1667, 7340, 1602, 9701, 4931, 8237, 1455, 2265, 3276, 4297, 9162, 7443, 7317, 5126, 1993, 7177, 7226, 7951, 9336, 5766, 9627, 5705, 3343, 7859, 653, 4126, 5097, 1656, 2983, 8150, 1010, 4796, 3214, 709, 8891, 4521, 5497, 1662, 3812, 4536, 5849, 9903, 609, 2982, 1874, 2828, 6258, 7913, 8440, 8903, 8278, 4692, 3555, 9975, 4772, 6264, 5018, 8523, 6097, 4483, 9457, 3079, 2240, 9078, 8921, 7087, 663, 8751, 3960, 7554, 9923, 3339, 5132, 7667, 9919, 9439, 8094, 456, 3563, 337, 514, 8078, 6249, 7661, 3178, 9927, 8475, 4454, 1537, 6325, 3498, 5837, 6427, 8729, 3632, 4614, 7178, 9116, 3674, 624, 2407, 6409, 1063, 6557, 7249, 165, 3254, 8427, 2145, 6549, 2657, 3598, 8166, 6795, 8928, 3888, 2251, 6072, 9277, 3623, 205, 8544, 3109, 937, 4855, 1401, 1709, 8134, 1322, 95, 1901, 284, 2163, 9077, 1954, 7018, 6118, 3073, 7254, 895, 809, 283, 5912, 2670, 7190, 6692, 3647, 2739, 1175, 3062, 7852, 3830, 4352, 3294, 6497, 8004, 3688, 3839, 9661, 6232, 7746, 2569, 5614, 8378, 9985, 2953, 1744, 3716, 9873, 4224, 5008, 7798, 5672, 5144, 3189, 8292, 236, 9852, 5637, 8806, 5681, 4518, 6670, 7545, 5803, 2610, 3022, 9518, 545, 3778, 4911, 3346, 9362, 5247, 5029, 572, 2220, 3919, 8233, 1975, 7483, 871, 6038, 2917, 7511, 6634, 8926, 8625, 5339, 7873, 6102, 4928, 5795, 2180, 5893, 3727, 7030, 8834, 2055, 5990, 4152, 2186, 2977, 3783, 6657, 6268, 5344, 3488, 2149, 1530, 1272, 8454, 3308, 7231, 7115, 3076, 4726, 6883, 7214, 4221, 6711, 8702, 7022, 1166, 3304, 8882, 794, 1185, 2243, 6630, 9736, 6740, 9332, 9696, 3480, 8044, 9327, 8894, 451, 1819, 327, 1775, 9255, 557, 5967, 407, 5447, 1208, 7587, 2329, 7549, 8315, 3570, 8556, 9824, 7503, 9626, 4800, 3381, 555, 8062, 2440, 501, 2903, 5554, 1285, 4886, 4059, 2820, 524, 8950, 3384, 9027, 5494, 2262, 5553, 5900, 201, 7508, 8529, 6342, 5138, 510, 5618, 1234, 6978, 1244, 5109, 3612, 4266, 3807, 9314, 1536, 9343, 2765, 9646, 3315, 5834, 5548, 1879, 3192, 9602, 2525, 1024, 6141, 4676, 7513, 7795, 7130, 9249, 3728, 870, 296, 137, 9593, 3149, 4134, 6939, 8911, 8886, 8108, 1741, 5590, 9719, 1625, 9189, 4390, 8414, 5703, 1745, 9782, 9279, 83, 5238, 3070, 3128, 8073, 7649, 7362, 5026, 6817, 6043, 7570, 3842, 5197, 3095, 3543, 6701, 1583, 3047, 3459, 8131, 2310, 7892, 5047, 3303, 5899, 9837, 6410, 300, 5851, 5373, 8850, 314, 6843, 9471, 5517, 7636, 6783, 6863, 5598, 2259, 2304, 8788, 7706, 611, 498, 7247, 4660, 1362, 4526, 2075, 9584, 7745, 8394, 7109, 6986, 428, 3058, 9120, 5974, 9342, 1049, 7592, 6862, 6796, 3258, 9918, 1688, 9601, 77, 6206, 4334, 6336, 2711, 4037, 4856, 1199, 1643, 858, 2234, 5223, 3389, 304, 174, 755, 8686, 1015, 1568, 8633, 5254, 4006, 7846, 9888, 7410, 7338, 1077, 8061, 6742, 9874, 1758, 1380, 977, 1073, 6297, 553, 4621, 291, 9835, 4907, 6967, 1227, 5312, 3815, 2438, 4153, 7099, 2497, 782, 6134, 6145, 3213, 8201, 399, 1263, 2695};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
