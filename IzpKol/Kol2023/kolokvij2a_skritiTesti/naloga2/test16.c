#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {8743, 6873, 3516, 2685, 8323, 4989, 9715, 7506, 902, 6991, 2609, 5567, 7644, 3282, 6617, 1054, 1489, 1025, 845, 6230, 6306, 8926, 9940, 2736, 449, 6515, 4091, 8721, 4497};
int _B[] = {4892, 1025, 8926, 3461, 3711, 3718, 6860, 6704, 1356, 6048, 3235, 4265, 8505, 1049, 2124, 7122, 9615, 3081, 5375, 5330, 1255, 2915, 4128, 6079, 7947, 5402, 9131, 447, 59, 5393, 9606, 3405, 5220, 1735, 4036, 9151, 7914, 2528, 1873, 7113, 3811, 7799, 3135, 7582, 3566, 9133, 7035, 3058, 1535, 9663, 1461, 2455, 3456, 6081, 5774, 7186, 8917, 6029, 9032, 4245, 2970, 1948, 1534, 3804, 8506, 4871, 4651, 646, 625, 4957, 8933, 4141, 6042, 6540, 3981, 9667, 2038, 801, 1629, 5395, 1038, 912, 6873, 3540, 5871, 7145, 1377, 7364, 758, 9572, 5559, 4254, 5863, 6777, 4384, 2751, 8044, 366, 5892, 7412, 659, 4627, 5710, 1347, 2618, 3044, 3467, 7506, 1987, 9649, 9166, 6055, 1266, 1717, 3850, 2365, 4916, 2965, 4349, 9124, 3516, 5342, 2894, 8362, 3488, 6480, 9177, 4571, 9480, 3143, 8384, 2168, 8836, 4875, 8077, 9533, 1662, 6914, 9769, 9871, 7724, 5546, 7618, 8422, 8718, 8204, 672, 514, 1605, 1551, 7689, 5153, 3647, 8838, 6903, 2406, 2632, 3145, 2674, 4170, 6493, 3756, 1983, 4221, 348, 7753, 2974, 654, 9472, 7276, 194, 6779, 6100, 7426, 9789, 8805, 8300, 1439, 3889, 3056, 8323, 7791, 5735, 6747, 9955, 5805, 9747, 7196, 3404, 8596, 9524, 4386, 6242, 9855, 381, 8812, 5310, 5581, 3210, 974, 3063, 5382, 6828, 1210, 1567, 1503, 1827, 8243, 7031, 1054, 8114, 780, 2470, 8592, 5287, 3999, 9640, 4114, 5479, 5537, 637, 9301, 6278, 934, 6399, 6440, 8665, 2763, 390, 6961, 6204, 8490, 9824, 3943, 3049, 4555, 5502, 5052, 58, 1913, 2652, 3491, 949, 1249, 1325, 2625, 8714, 4180, 7011, 6891, 5745, 7088, 4310, 303, 5815, 8445, 3966, 2994, 6363, 3160, 579, 8860, 8307, 1640, 7022, 7962, 8299, 7703, 9255, 8020, 7350, 4082, 250, 3866, 636, 2948, 4027, 2882, 2728, 6875, 2372, 9479, 7652, 1715, 6948, 3593, 5191, 4983, 3360, 7664, 6850, 133, 9463, 9534, 9513, 1615, 8551, 1531, 4135, 7307, 5074, 5633, 6222, 8649, 31, 3894, 7805, 62, 4572, 2249, 2307, 8317, 1565, 9238, 5029, 2863, 6582, 901, 5117, 8174, 7590, 3019, 5593, 2189, 6785, 8242, 2451, 140, 6346, 7297, 2524, 3282, 7895, 1398, 7614, 4048, 5385, 6865, 9276, 9994, 9954, 2096, 1792, 3621, 4981, 6524, 9866, 8260, 4859, 1521, 9277, 9359, 9791, 9610, 600, 3768, 9931, 4789, 7232, 3050, 246, 4720, 6302, 1754, 1726, 5274, 2768, 7019, 2204, 1959, 7488, 4462, 6306, 8641, 1124, 7580, 1965, 1835, 1044, 2490, 8789, 8267, 5795, 1898, 9711, 3912, 9939, 410, 698, 8874, 6811, 6757, 2484, 8189, 9944, 8748, 9009, 9052, 7127, 1261, 9940, 2264, 531, 5665, 7394, 7282, 6679, 2600, 1972, 8558, 3788, 5047, 9715, 1864, 7418, 6941, 7327, 7731, 9527, 5695, 5108, 6076, 9545, 4262, 9235, 3824, 7211, 2467, 2901, 3631, 5637, 5490, 3980, 2088, 154, 1778, 3418, 190, 7063, 574, 5048, 4676, 7771, 3325, 3605, 1, 5831, 5115, 2628, 1728, 4399, 816, 1917, 5127, 9161, 7204, 7708, 4303, 6721, 4509, 6536, 5520, 7003, 3313, 938, 5211, 7487, 6986, 7745, 9575, 4897, 3199, 4578, 9888, 4752, 3216, 3181, 8201, 1258, 8961, 4030, 5708, 6786, 2875, 1920, 8165, 153, 5010, 8855, 1329, 3723, 2663, 6170, 8129, 9705, 3652, 6931, 8184, 6908, 8682, 4565, 9595, 2517, 8224, 2097, 4280, 2186, 9018, 8700, 9716, 8412, 4630, 621, 5463, 3994, 8029, 5113, 9126, 8155, 5256, 5492, 7478, 580, 1979, 4359, 9097, 7838, 2353, 2711, 9110, 2730, 557, 6797, 5200, 1004, 2083, 2074, 8710, 2621, 9934, 595, 9319, 9200, 9864, 8730, 8519, 6902, 7100, 5712, 36, 3115, 6238, 2990, 2529, 160, 6478, 6375, 4583, 2109, 1477, 7473, 1138, 1738, 4967, 4887, 8607, 5093, 4264, 81, 6157, 6347, 8032, 6814, 9827, 7644, 1769, 8294, 3572, 9207, 9404, 8390, 4074, 7643, 7228, 3911, 7794, 5148, 9283, 7494, 1807, 8386, 1436, 2999, 7649, 7998, 6702, 320, 3078, 7960, 7384, 6364, 443, 4797, 131, 3860, 8886, 4895, 5151, 8749, 4156, 1043, 4807, 9060, 5266, 6433, 5962, 2127, 5335, 4161, 2812, 539, 1495, 8770, 1751, 5854, 988, 3293, 6059, 1606, 6855, 6445, 854, 3854, 7203, 1486, 78, 9314, 2125, 581, 1980, 3221, 9150, 8477, 8688, 1691, 5779, 1695, 9447, 728, 4621, 2022, 6027, 5598, 1766, 9966, 449, 328, 6253, 8354, 2704, 1890, 2241, 9643, 441, 4066, 6120, 4570, 4841, 7562, 6156, 9730, 4045, 3993, 8634, 7067, 8257, 9123, 3742, 7755, 7115, 7085, 1843, 7416, 1491, 3092, 9066, 6186, 7940, 1932, 8013, 6078, 5301, 455, 5791, 3594, 9054, 2343, 4478, 392, 4547, 9873, 8103, 1653, 189, 4032, 2895, 3794, 4213, 7802, 885, 1274, 1037, 3486, 168, 1299, 9661, 8432, 5965, 6506, 7005, 1378, 5253, 9001, 2193, 6004, 6561, 7754, 4725, 784, 9024, 3587, 9108, 3640, 9443, 3441, 7650, 4142, 8704, 9923, 5548, 4792, 1158, 1635, 9544, 5923, 7266, 3472, 6500, 9014, 761, 7141, 6193, 4756, 288, 4761, 4339, 1896, 4970, 272, 8008, 6083, 2978, 7105, 6458, 6666, 1819, 9457, 1483, 3375, 6213, 5567, 7546, 5900, 9129, 4396, 5219, 503, 4158, 5919, 5714, 1761, 7087, 4631, 6459, 8983, 3053, 6016, 2642, 508, 4744, 5144, 3252, 4866, 3386, 2235, 2244, 3155, 4093, 7372, 9825, 6259, 9053, 2584, 6560, 3365, 2048, 5092, 5391, 7367, 7251, 9949, 2825, 2130, 7056, 316, 4726, 9156, 2884, 4675, 5381, 6135, 9138, 3264, 8427, 6318, 3445, 1780, 3823, 1494, 2283, 753, 3855, 9086, 556, 2908, 3998, 4723, 5895, 9205, 7585, 8211, 3829, 6121, 6703, 6784, 9786, 8456, 3507, 457, 6211, 2986, 4024, 7111, 7736, 5767, 895, 1190, 9098, 3940, 5368, 5036, 8932, 9832, 5105, 5832, 3, 2035, 3725, 1838, 9419, 8127, 9859, 28, 2344, 6340, 3355, 1045, 4528, 7015, 6249, 4184, 6981, 5336, 3076, 7099, 5091, 5251, 5944, 9352, 6268, 9311, 9670, 4070, 2128, 8439, 8648, 566, 6612, 7622, 4538, 8650, 3921, 8276, 6568, 5551, 2460, 8132, 4497, 4353, 2846, 3498, 7637};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
