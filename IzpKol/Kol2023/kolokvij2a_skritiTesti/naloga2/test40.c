#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {5584, 6474, 8612, 6584, 2135, 9378, 1369, 3038, 6612, 5197, 9691, 5939, 3986, 3333, 5530, 4496, 1332, 2814, 483, 7379, 922, 6020, 6546, 10, 3028, 1383, 3362, 5617, 6765, 4559, 4527, 537, 6104, 7251, 6338, 708, 6477, 4458, 2115, 1928, 7587, 1239, 2641, 2390, 4457, 2878, 829, 2029, 455, 2273, 8824, 1037, 785, 7021, 1584, 8788, 6639, 9086, 5270, 9827, 119, 1150};
int _B[] = {6558, 9224, 6775, 4623, 2022, 1721, 921, 270, 6652, 1960, 9820, 3022, 225, 4603, 2130, 7498, 7338, 3038, 8609, 708, 105, 7048, 8654, 4085, 1627, 2793, 6338, 5140, 6963, 2383, 9889, 8062, 1689, 9081, 8898, 3557, 4624, 5568, 1431, 7587, 2029, 8212, 7196, 5215, 5412, 7251, 577, 1800, 6104, 119, 4532, 6907, 8944, 9579, 6233, 2086, 3249, 6957, 1202, 1519, 7894, 8612, 483, 4697, 5365, 3109, 4902, 2046, 5930, 6643, 475, 4750, 330, 3860, 2268, 844, 9866, 9512, 3345, 1879, 2273, 7117, 1927, 985, 7254, 6852, 951, 5270, 4983, 9870, 77, 9247, 2115, 5486, 3028, 2062, 8892, 3592, 371, 9273, 3518, 9102, 1354, 9880, 72, 2749, 1241, 5433, 1939, 1550, 2135, 2830, 4744, 9753, 7374, 8814, 945, 713, 9391, 1679, 7021, 6143, 4971, 2961, 4527, 4180, 1150, 1219, 5056, 5423, 2921, 2449, 2001, 1047, 2889, 2390, 9262, 4496, 6242, 922, 5876, 5197, 5856, 466, 7512, 3849, 111, 6002, 9378, 8824, 2955, 4153, 5983, 3574, 9755, 3862, 8275, 9462, 2031, 5640, 1893, 1130, 1369, 2314, 9691, 426, 3853, 4733, 3747, 3701, 2783, 1816, 6836, 882, 5179, 8285, 5711, 5267, 1265, 6854, 6525, 5108, 7815, 6360, 9778, 6695, 821, 8076, 9884, 9827, 3280, 5939, 2460, 6765, 1928, 2067, 1584, 6639, 8788, 504, 480, 1037, 8447, 9045, 4458, 6784, 1853, 7085, 959, 5003, 600, 5845, 6975, 5229, 3042, 6102, 8790, 1332, 4686, 973, 7396, 3939, 3317, 4696, 3986, 5987, 9616, 1103, 4935, 285, 2799, 2561, 7473, 1141, 2814, 7365, 3308, 5463, 2032, 785, 2443, 663, 4232, 3225, 5746, 41, 9857};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
