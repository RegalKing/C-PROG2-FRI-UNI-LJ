#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {5841, 1453, 1478, 7445, 9910, 5277, 4833, 5757, 7415, 4398, 6914, 7420, 6094, 7643, 7921, 8845, 8460, 1698, 6626, 9068, 8204, 1103, 8195, 1767, 9263, 7504, 268, 6284, 6813, 4133, 3136, 7329, 8329, 7879, 592, 6776, 2521, 9406, 7213, 1022, 5863, 5023, 6428, 382, 3557, 3287, 258, 3178, 3266, 1118, 4816, 598, 9502, 2455, 1354, 7678, 9742, 261, 2845, 5493, 713, 7268, 5646, 620, 6697, 5984, 7609, 5024, 6015, 683, 4145, 5760, 3919, 7952, 4219, 4757, 5491, 2158, 7903, 9393, 5279, 7782, 6721, 6114, 5823, 9464, 7236, 9187, 3514, 2145, 9493, 2042, 6583, 5169, 9669, 374, 211, 4810, 8401, 8413, 9051, 3393, 6076, 5837, 4977, 760, 7080, 7836, 901, 6715, 8447, 687, 3898, 9558, 1066, 4745, 4386, 7593, 2628, 7458, 9667, 8638, 2990, 7541, 1267, 7275, 9987, 6966, 8640, 2840, 9538, 1809, 8545, 104, 2131, 5761, 6221, 8973, 7296, 5173, 810, 1154, 6994, 6770, 4455, 1480, 1609, 8350, 3023, 8036, 6999, 3399, 8851, 6367, 5982, 5974, 7398, 6807, 9788, 7701, 701, 7014, 5504, 1825, 5234, 6470, 1405, 8498, 5008, 2120, 2894, 5903, 4979, 4363, 1914, 4523, 7715, 6792, 6420, 1618, 6422, 8034, 6878, 9459, 2716, 3614, 5359, 5442, 5398, 1434, 4796, 8817, 9171, 3807, 3264, 2722, 2305, 9247, 2933, 7356, 8922, 8557, 2771, 7709, 7790, 2520, 2167, 4886, 7079, 4912, 731, 1901, 635, 580, 3373, 2516, 6038, 1565, 1475, 4340, 7295, 7200, 396, 906, 5652, 4206, 3371, 3425, 8099, 5507, 6362, 3464, 3488, 206, 9181, 3004, 5096, 1237, 5131, 2945, 8490, 2764, 9262, 9519, 5390, 5588, 3473, 7312, 1132, 7456, 2591, 7050, 4046, 3782, 5867, 5951, 6548, 6640, 3001, 3235, 8961, 9166, 7414, 2916, 5744, 9433, 4436, 3563, 8133, 43, 4080, 5622, 2973, 6970, 8540, 6274, 6953, 8665, 2522, 308, 9131, 9592, 4338, 7900, 9286, 8760, 6873, 9892, 3225, 5869, 1126, 7476, 972, 9352, 3327, 8320, 1600, 7629, 1466, 6464, 7065, 8500, 7642, 2767, 1898, 5983, 3843, 4708, 7221, 2587, 3855, 5786, 6983, 888, 6896, 4054, 4621, 3281, 1128, 3978, 1813, 1962, 1752, 1038, 5426, 6441, 8474, 2862, 3234, 4238, 5480, 8541, 3797, 3926, 4958, 184, 5103, 3991, 3749, 8274, 5427, 2984, 1599, 7718, 707, 2454, 9977, 4401, 7586, 733, 5217, 6980, 4404, 615, 2205, 6035, 6026, 926, 5933, 4331, 7371, 6689, 4910, 7444, 779, 435, 5302, 4456, 6050, 5533, 852, 8311, 5553, 3931, 3551, 1653, 6746, 6875, 4995, 5187, 5538, 8243, 5643, 1888, 1674, 1784, 1910, 6093, 3032, 3460, 7435, 5333, 5739, 3888, 9810, 8275, 7178, 3726, 2391, 9432, 8470, 8657, 6467, 5581, 1175, 7568, 9402, 3529, 2557, 3104, 6135, 7806, 7950, 8480, 8670, 6351, 7871, 4608, 2163, 8737, 1687, 9865, 9439, 9442, 7462, 8573, 2575, 4717, 3053, 275, 1032, 198, 5136, 1590, 6239, 3993, 6033, 6331, 1737, 8793, 5898, 8930, 9182, 2750, 8333, 6771, 5876, 429, 3699, 8354, 5172, 5054, 1413, 467, 3538, 9126, 5374, 2089, 5961, 7258, 4698, 7777, 7743, 4726, 1115, 5344, 1259, 9549, 4569, 5239, 2621, 3627, 9879, 4923, 2018, 1951, 8946, 5958, 755, 9140, 284, 5636, 6485, 4297, 7410, 4017, 2509, 7791, 670, 8268, 2908, 2191, 8511, 6617, 2776, 669, 310, 9423, 4257, 1088, 6112, 4545, 3107, 6413, 8753, 2371, 2495, 2153, 7899, 5986, 7071, 6596, 6425, 1141, 1150, 689, 2186, 6293, 1953, 975, 2396, 191, 406, 4911, 1758, 5921, 9415, 9934, 1887, 7497, 1946, 1978, 4505, 2265, 9117, 5735, 7195, 4207, 7053, 7424, 6226, 1999, 360, 8925, 9328, 4996, 8065, 2420, 7688, 1308, 601, 920, 1348, 634, 6334, 8374, 3625, 9303, 8171, 2665, 1286, 4879, 7097, 717, 6590, 5964, 147, 2036, 2911, 7359, 8538, 4803, 2721, 1188, 8154, 9461, 2038, 2192, 507, 1334, 7430, 9024, 2048, 4829, 653, 5595, 1431, 5016, 129, 1602, 2286, 8136, 3147, 4662, 7728, 2550, 569, 8001, 8290, 8427, 171, 8466, 2961, 4391, 4836, 2568, 2744, 2077, 1125, 7551, 3270, 677, 9874, 9541, 233, 3603, 9399, 1998, 1498, 3416, 8935, 4199, 9861, 7856, 6537, 7875, 1469, 9312, 4266, 5412, 7805, 3713, 2655, 2165, 2261, 3929, 4568, 9859, 9061, 9598, 7668, 8088, 5366, 3392, 5813, 3622, 5227, 2086, 2594, 4574, 9401, 5679, 8362, 893, 7256, 603, 5120, 2555, 5512, 1732, 6780, 4952, 3171, 8967, 7746, 2546, 7789, 611, 9028, 8820, 5802, 9336, 9836, 9364, 4019, 174, 2772, 9818, 7861, 915, 9886, 7583, 8049, 6277, 3349, 4524, 2059, 8865, 8566, 6558, 8662, 6445, 6098, 1427, 7250, 7573, 7810, 4930, 2993, 877, 5092, 9955, 7406, 9206, 5550, 4174, 623, 5190, 7536, 3790, 9847, 7082, 3307, 4296, 4078, 3698, 2257, 2024, 1217, 4110, 2637, 7331, 3144, 6530, 3201, 3864, 7239, 1421, 8254, 5373, 8907, 7735, 6503, 1658, 5069, 8115, 4706, 178, 9624, 8639, 4715, 1872, 4013, 5212, 9787, 3629, 772, 1807, 4379, 6062, 8894, 4356, 8364, 9326, 3068, 5768, 94, 6671, 737, 5670, 6018, 892, 6160, 3301, 4965, 8963, 7612, 770, 6434, 1665, 1258, 1383, 6608, 3753, 3218, 6939, 2419, 2367, 7355, 6192, 7570, 9133, 1500, 2682, 6977, 1726, 9130, 4414, 5166, 215, 727, 4121, 6849, 5257, 1559, 270, 5216, 5275, 8431, 6625, 5526, 4411, 6663, 700, 565, 1592, 7878, 1485, 1281, 9003, 3681, 9392, 7067, 1062, 768, 3379, 7147, 7786, 8248, 2139, 9796, 7310, 6235, 3505, 1950, 9799, 6563, 814, 77, 4196, 8011, 6267, 5886, 7733, 6659, 8021, 9928, 6186, 4711, 6487, 8105, 5338, 8087, 7722, 9737, 1044, 8070, 5897, 9175, 8544, 8982, 1773, 146, 4750, 5971, 3820, 480, 6869, 7122, 5005, 2272, 2810, 2230, 3065, 8782, 4423, 4165, 6458, 7255, 1470, 7946, 4582, 8729, 4454, 1472, 8578, 2051, 8436, 1479, 1652, 1790, 8515, 4189, 3892, 627, 236, 2659, 6208, 45, 5419, 5847, 4921, 8298, 6549, 8184, 8022, 3120, 8028, 7103, 2144, 1521, 5558, 5733, 5365, 4560, 3591, 1514, 1862, 2368, 9531, 4248, 4553, 7475, 7545, 5950, 217, 9974, 1817, 2919, 7911, 718, 4300, 6343, 786, 3153, 2636, 5564, 8628, 4213, 6812, 4162, 2227, 6989, 3795, 4854, 8233, 6835, 9023, 783, 7959, 6357, 3160, 6774, 9320, 7916, 8803, 1786, 1474, 4098, 6643, 6959, 4149, 2934, 5448, 8696, 4002};
int _B[] = {3235, 6218, 1898, 1608, 5603, 2498, 8782, 4854, 9901, 2791, 3802, 2767, 3557, 6098, 901, 8198, 4145, 2984, 4564, 3293, 9924, 8049, 6704, 1733, 3978, 7878, 3895, 8433, 2077, 9493, 5768, 3562, 1575, 8400};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
