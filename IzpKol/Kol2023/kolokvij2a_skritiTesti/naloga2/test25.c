#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {8111, 297, 2069, 9117, 9390, 9518, 3302, 5467, 7249, 2990, 4147, 8553, 7028, 5402, 9140, 3209, 5502, 4424, 296, 2683, 2360, 3931, 230, 7677, 656, 1664, 3119, 197, 2919, 9346, 5959, 3227, 8193, 2907, 6706, 918, 7133, 6177, 3888, 849, 2300, 4740, 8235, 7690, 8444, 1520, 1789, 6118, 6546, 5948, 1215, 1751, 4287, 9384, 1875, 2518, 1276, 9668, 6138, 8085, 4838, 6553, 2631, 6083, 196, 7793, 555, 1954, 8262, 6828, 1110, 9086, 1509, 3021, 5529, 2904, 8762, 5998, 1570, 4145, 8360, 28, 8305, 891, 881, 49, 1432, 9908, 8020, 5173, 4171, 7521, 5373, 1090, 9282, 5107, 9583, 6309, 6838, 3837, 4113, 9716, 2107, 7236, 3359, 4447, 8828, 1411, 4746, 1608, 9162, 4327, 9451, 3548, 1368, 7847, 5781, 2996, 7553, 1726, 6883, 9829, 1525, 8736, 806, 7271, 8268, 4079, 6443, 7647, 4584, 3014, 9324, 107, 8584, 4285, 1821, 6375, 2285, 6129, 6499, 1545, 8801, 6702, 8244, 1531, 509, 9889, 5917, 7443, 5106, 2595, 3271, 4457, 9691, 4344, 96, 119, 9528, 2785, 1073, 4875, 9161, 895, 6423, 1510, 6536, 8413, 8778, 9932, 8294, 3404, 318, 7865, 7558, 2062, 3039, 1943, 6768, 424, 2586, 6985, 7686, 2190, 836, 1661, 2732, 8745, 184, 7700, 3585, 3550, 4300, 2002, 4976, 5647, 7332, 9094, 6654, 4968, 9401, 698, 8096, 3879, 7139, 7074, 3115, 8625, 4092, 9068, 1908, 7467, 4375, 8271, 7790, 3660, 2449, 6862, 7189, 1444, 6009, 51, 9700, 5002, 6749, 4844, 2677, 9321, 2780, 3986, 2982, 9989, 1004, 8982, 2505, 3387, 2820, 8826, 9280, 1241, 3987, 5822, 8496, 6705, 1644, 4011, 6426, 1288, 2611, 4988, 8512, 5971, 3485, 7963, 127, 3166, 8843, 4796, 9448, 9548, 1956, 8481, 8367, 2167, 613, 9938, 362, 7299, 8081, 7969, 9588, 2110, 559, 2938, 3971, 2883, 9428, 5709, 3494, 532, 6028, 428, 553, 7290, 984, 781, 3268, 1892, 436, 3032, 468, 3448, 4525, 1580, 4049, 6355, 3169, 1068, 2827, 976, 5420, 4054, 2288, 7580, 3691, 5011, 5281, 4952, 6293, 8086, 7946, 8228, 9953, 1566, 2828, 1419, 9982, 7173, 191, 1160, 7701, 6473, 6879, 3981, 1272, 2094, 8833, 3680, 9361, 7167, 9032, 7975, 3423, 1530, 5153, 8914, 3434};
int _B[] = {4639, 4837, 3564, 2707, 5585, 2272, 9042, 3183, 7968, 5827, 4472, 5976, 7293, 3388, 8078, 7529, 1297, 3227, 5401, 123, 4791, 2039, 9779, 9829, 4017, 7943, 8874, 6508, 1252, 6954, 8736, 3935, 7430, 9318, 9437, 6811, 5852, 7292, 7642, 5316, 1119, 4593, 4957, 7204, 3691, 3213, 2507, 7443, 3243, 5025, 5529, 8319, 4606, 5584, 7572, 5392, 3778, 5708, 2245, 3511, 403, 7076, 226, 5772, 5967, 993, 147, 8734, 1527, 9821, 484, 7760, 9134, 1518, 7682, 4904, 7588, 9024, 6665, 9752, 4431, 2483, 3946, 4240, 4736, 4236, 8666, 9510, 8865, 5418, 7773, 9029, 7747, 138, 8020, 5618, 2062, 678, 1090, 353, 8467, 6401, 2688, 6889, 9073, 2339, 988, 2378, 6122, 7279, 8030, 9989, 9611, 5299, 1279, 390, 1372, 9639, 8835, 8450, 8145, 6654, 8983, 2909, 9958, 2677, 4933, 6101, 361, 7273, 7581, 6993, 7154, 1302, 2959, 5936, 6288, 8175, 5889, 3215, 4013, 7920, 6118, 3200, 5860, 541, 6862, 9227, 1713, 7379, 6015, 9838, 3283, 6089, 1800, 7667, 1956, 5700, 4000, 6146, 4462, 3203, 7439, 8329, 9367, 666, 2459, 5041, 4991, 6443, 3404, 4689, 9143, 3284, 8118, 596, 6014, 7689, 7146, 3026, 5767, 9168, 1276, 5543, 5514, 1098, 3134, 9518, 7203, 7381, 3950, 7683, 8640, 1524, 7049, 1681, 6995, 2362, 9939, 6661, 2580, 7638, 4745, 3837, 6790, 1867, 1927, 7071, 9492, 5214, 3277, 2191, 3711, 602, 7741, 7668, 4275, 5557, 8050, 8457, 7072, 5665, 777, 3350, 128, 2288, 8341, 7200, 5723, 7222, 3820, 4045, 4139, 1901, 2332, 8820, 4955, 437, 205, 8347, 6171, 4471, 9119, 424, 2530, 5394, 6950, 8683, 6650, 8390, 2518, 3459, 341, 8483, 7227, 6016, 7351, 7396, 9687, 4613, 6487, 9944, 9306, 2488, 1152, 7138, 5138, 9738, 1947, 2969, 3525, 8261, 9149, 8444, 4746, 7603, 1853, 7167, 757, 2135, 6997, 8106, 3342, 3232, 5745, 6542, 6758, 2582, 2296, 2468, 5515, 24, 9315, 3119, 1331, 2170, 5610, 6158, 303, 7179, 6300, 3759, 1204, 6178, 2440, 4896, 9902, 1925, 1538, 2946, 7595, 8545, 1150, 2680, 9084, 3763, 8908, 960, 8315, 1875, 6620, 114, 8726, 7, 2692, 6674, 782, 8509, 7983, 6942, 3554, 4765, 82, 1023, 6469, 1863, 5203, 764, 2379, 5019, 3679, 6297, 7142, 4323, 2765, 6579, 6551, 834, 7465, 1140, 7121, 4653, 1968, 422, 8286, 6814, 5930, 8340, 6442, 734, 8128, 9265, 1189, 1602, 9469, 8950, 5405, 8213, 3463, 6522, 8038, 73, 3390, 4342, 1067, 6251, 5521, 1496, 8544, 6689, 6391, 8737, 9203, 9310, 454, 7339, 9572, 3409, 8365, 3808, 182, 1745, 5760, 8838, 3031, 631, 9907};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
