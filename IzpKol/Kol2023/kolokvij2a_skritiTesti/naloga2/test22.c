#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {6588, 185, 275, 8224, 4935, 4978, 7849, 5997, 947, 9070, 7179, 9823, 8721, 9090, 3433, 7369, 1341, 6408, 2031, 1762, 6439, 1589, 2910, 2030, 6890, 1972, 3814, 3364, 319, 770, 4286, 2698, 6030, 5335, 5168, 9509, 6443, 3661, 5375, 7506, 3261, 7256, 9576, 8558, 5985, 8575, 2096, 9017, 6887, 7278, 1842, 8623, 603, 387, 5223, 5881, 1461, 659, 7036, 7484, 5323, 5760, 703, 1344, 3333, 3341, 3271, 6520, 6863, 527, 2836, 4897, 8298, 4824, 5653, 379, 9855, 5589, 3847, 5672, 5973, 3175, 3350, 4397, 6894, 1147, 8796, 4531, 2457, 5713, 3618, 799, 3949, 1133, 649, 5710, 3134, 1244, 7602, 2839, 272, 8366, 8980, 1427, 7941, 2454, 824, 4635, 2692, 6897, 7858, 4774, 5988, 9034, 4183, 8974, 2191, 5041, 7448, 5943, 4714, 2064, 3003, 1668, 3916, 6181, 4125, 232, 3924, 9130, 7377, 3052, 9447, 157, 975, 2401, 8573, 6661, 365, 9615, 7672, 3756, 4467, 7235, 8609, 9083, 4019, 8432, 1795, 1766, 898, 7861, 5489, 710, 2673, 5189, 5254, 9030, 5719, 1019, 2531, 202, 9150, 3967, 8515, 7011, 9614, 1992, 807, 6558, 3993, 535, 7765, 2312, 1062, 9490, 8225, 2691, 3920, 1681, 8576, 2245, 7653, 870, 5612, 7204, 570, 825, 9111, 633, 3619, 3194, 4572, 7631, 5356, 7342, 5852, 976, 1584, 7475, 4761, 7370, 9973, 929, 1788, 7301, 9354, 2270, 4259, 6790, 3596, 5100, 9202, 836, 4459, 6334, 110, 2709, 178, 7991, 4192, 7165, 3021, 2074, 7408, 5967, 1285, 3626, 809, 9352, 4118, 2809, 3206, 6007, 9798, 6967, 4469, 5550, 4328, 6804, 9965, 9124, 4999, 8137, 4837, 7452, 2883, 9998, 4985, 1621, 9500, 261, 7686, 7244, 9472, 2228, 2490, 7830, 7380, 7586, 6276, 768, 4313, 1128, 5233, 2627, 57, 4247, 3034, 6184, 3945, 3235, 7151, 7623, 7458, 7716, 7969, 8807, 7203, 3805, 3541, 8297, 3761, 7076, 8389, 6693, 6102, 8204, 7489, 5354, 7320, 2664, 6997, 5393, 9936, 6294, 3718, 8429, 4217, 6585, 3, 1361, 6970, 6117, 2083, 1024, 2316, 7483, 9849, 5109, 1859, 9014, 7810, 8759, 6597, 6195, 9181, 1017, 6572, 7517, 2067, 3180, 5638, 8107, 7909, 8856, 4387, 7837, 1605, 9443, 6044, 3773, 9105, 5461, 4221, 9180, 164, 6931, 5475, 7078, 2, 2720, 7738, 6028, 8069, 6953, 7220, 6066, 6757, 9183, 8803, 6152, 9765, 556, 1067, 1207, 3762, 2505, 1553, 7854, 9967, 6628, 3141, 4969, 8892, 683, 6019, 8316, 4161, 5888, 6722, 8085, 938, 3577, 9487, 7945, 7147, 6303, 8699, 5542, 3198, 490, 7535, 7610, 6650, 2645, 8071, 6414, 9398, 9834, 5203, 1828, 3760, 2071, 8927, 290, 5727, 9746, 7119, 8900, 5238, 3365, 2172, 278, 4416, 1132, 8480, 3243, 7340, 7866, 7694, 5179, 6492, 8488, 6807, 6552, 2043, 7956, 5093, 1604, 9152, 2725, 2572, 3008, 6392, 259, 6885, 7018, 4589, 7395, 115, 2092, 3288, 8828, 7798, 9063, 1384, 9333, 2140, 361, 853, 4307, 8209, 7167, 8617, 1753, 3699, 6417, 9433, 2183, 8713, 3865, 5807, 3573, 7114, 8834, 8227, 1975, 2032, 5038, 4068, 2993, 1545, 1705, 1463, 999, 2085, 4987, 2084, 2134, 1495, 8406, 8561, 3489, 1831, 6450, 5434, 5739, 850, 4735, 3109, 3959, 4246, 1488, 4993, 2607, 8374, 5129, 3399, 1836, 8598, 9366, 8186, 2099, 6261, 8952, 1105, 675, 6748, 9113, 5275, 4908, 7852, 8270, 585, 5644, 1191, 8148};
int _B[] = {6865, 2278, 4935, 2715, 7408, 853, 6274, 4172, 603, 6884, 2312, 8251, 9895, 6016, 8272, 6285, 705, 6165, 9398, 5985, 9105, 2773, 1360, 5649, 649, 2725, 4355, 1766, 1891, 1082, 8892, 9364, 6568, 4710, 7487, 1901, 4513, 2644, 6458, 3125, 9113, 5727, 9834, 3573, 185, 9750, 6690, 5881, 1530, 1113, 3696, 774, 9765, 5541, 9169, 799, 490, 9748, 650, 3769, 1859, 5329, 6334, 8834, 7857, 2559, 4029, 7220, 6195, 9639, 8432, 8227, 6350, 585, 8721, 1546, 7831, 7484, 874, 2104, 8282, 7324, 1461, 1681, 7616, 7719, 2827, 5540, 9657, 157, 1495, 7880, 453, 6362, 6122, 8148, 3565, 2459, 3921, 1992, 9183, 2780, 8155, 4161, 1191, 9383, 7768, 8570, 8197, 8888, 2912, 558, 7457, 2682, 5636, 779, 6374, 1795, 3541, 748, 9214, 2080, 763, 1106, 2626, 3699, 9455, 1416, 7142, 2405, 7798, 2858, 5055, 592, 2795, 2617, 6038, 7490, 2299, 5589, 8430, 3738, 3959, 5968, 4155, 2720, 8895, 4110, 9472, 5775, 6552, 8938, 6396, 5509, 2484, 1285, 954, 7166, 4999, 5515, 7232, 2921, 4714, 1128, 7830, 5354, 6967, 1639, 5319, 6885, 4373, 884, 4707, 3842, 665, 6066, 929, 3115, 7245, 7061, 2490, 7134, 6500, 9564, 2135, 7452, 4913, 9193, 7517, 7399, 8036, 4476, 4401, 3341, 2186, 9615, 5595, 1384, 5235, 5475, 2191, 6296, 3757, 4901, 2140, 8067, 3235, 9351, 9998, 8110, 2, 9380, 2368, 7272, 1584, 9432, 2089, 8641, 6970, 5638, 6243, 1836, 8297, 1927, 7624, 6940, 2172, 9414, 9446, 8288, 5612, 2719, 417, 6890, 361, 1828, 9562, 6597, 5062, 6097, 4645, 5163, 8573, 2908, 268, 8204, 4026, 6804, 7187, 6088, 9425, 9826, 7204, 3900, 259, 9030, 5433, 2698, 4985, 8398, 2964, 9227, 7808, 9697, 8327, 1243, 8480, 3582, 6769, 7953, 8342, 3763, 7925, 2671, 6276, 3914, 8199, 7610, 976, 955, 7747, 1831, 1266, 6716, 7956, 6506, 3853, 824, 8640, 7623, 6894, 2691, 4961, 1061, 8139, 5943, 4874, 8929, 3633, 4192, 8355, 8097, 3612, 587, 8448, 9090, 2967, 627, 9967, 2270, 1246, 3323, 8100, 3350, 3271, 703, 7594, 694, 4104, 7530, 1752, 8104, 1893, 7159, 8598, 2134, 4145, 4467, 1816, 9014, 9435, 6006, 4125, 2676, 6901, 4648, 2910, 8224, 4591, 9496, 9060, 8399, 3181, 4379, 3661, 5596, 1886, 4824, 7627, 3691, 3433, 6266, 9373, 5991, 6734, 7945, 1587, 3978, 3038, 2411, 3856, 4978, 5973, 4421, 1867, 6512, 7244, 848, 2071, 4247, 5107, 1512, 4560, 9082, 4299, 3614, 9823, 816, 2258, 7658, 7645, 3899, 7102, 6562, 5060, 2689, 556, 6261, 9451, 4186, 9352, 7906, 7941, 2457, 4191, 3677, 6897, 57, 9034, 516, 6414, 8020, 1866, 2993, 6116, 5569, 4465, 2750, 683, 7192, 1442, 2792, 275, 7377, 9017, 8995, 7278, 1361, 2513, 4974, 4173, 1788, 7586, 4118, 9973, 6487, 3265, 4729, 3088, 9641, 4762, 915, 3925, 104, 6904, 8542, 1531, 1842, 4505, 6558, 2218, 8118, 8303, 9699, 625, 4217, 8152, 610, 7018, 4221, 2607, 8584, 6492, 2771, 778, 2627, 4244, 1589, 6007, 6108, 5807, 9931, 6047, 7114, 7770, 2645, 6997, 707, 6128, 1001, 366, 5748, 4663, 938, 3819, 9320, 6994, 3099, 7686, 4003, 1762, 1517, 5241, 238, 9065, 615, 4636, 1931, 184, 3888, 3205, 8515, 3946, 4518, 991, 6183, 3581, 1472, 8536, 6629, 7790, 968, 501, 5559, 2478, 5930, 8856, 8270, 8406, 3970, 7618, 2962, 6305, 1987, 8313, 865, 512, 5168, 4589, 7395, 7385, 8241, 84, 5356, 7879, 9669, 9949, 5961, 7179, 4011, 1604, 4265, 6650, 7572, 8822, 2454, 7864, 8820, 6014, 5940, 4466, 8495, 5323, 8365, 3621, 5314, 3841, 3457, 6401, 691, 7602, 8068, 8234, 2787, 178, 8107, 9296, 4027, 8590, 2086, 6344, 8754, 6566, 2692, 6633, 9141, 1464, 5139, 696, 3910, 3992, 4452, 6093, 6814, 5571, 6820, 7078, 7672, 6044, 164, 5382, 5610, 9471, 3683, 9063, 6722, 3809, 1644, 4416, 1516, 1017, 811, 6850, 5020, 9106, 6450, 559, 7852, 6522, 7597, 5497, 9936, 6472, 6916, 9579, 2511, 47, 6214, 898, 2577, 9917, 8092, 5953, 9411, 2938, 5182, 2193, 5694, 9957, 4554, 3365, 8420, 8803, 8089, 2096, 5254, 6130, 8395, 3137, 6181, 3458, 4124, 8609, 2246, 6178, 3195, 5629, 8126, 6453, 2383, 7437, 1503, 8236, 8477, 3304, 4142, 1611, 1975, 4923, 9181, 8316, 7854, 3800, 3117, 8033, 2287, 3470, 9304, 1207, 8366, 5342, 3406, 3483, 4993, 7820, 6336, 8071, 2084, 5882, 9583, 2099, 3861, 5939, 9374, 4662, 1989, 1168, 8664, 4073, 3175, 466, 2228, 9522, 1463, 8138, 1177, 2345, 700, 7884, 6926, 3104, 7011, 9798, 1067, 965, 7837, 3464, 9726, 8367, 744, 8634, 4115};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
