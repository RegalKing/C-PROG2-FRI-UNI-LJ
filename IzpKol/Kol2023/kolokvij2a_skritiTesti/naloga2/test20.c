#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {6540, 5817, 1686, 8809, 1888, 4448, 6767, 6099, 8620, 5629, 9912, 5889, 1167, 536, 418, 3988, 440, 8249, 8082, 8424, 4240, 1754, 2262, 1663, 715, 2354, 2807, 9763, 2313, 3418, 4302, 1828, 8784, 9981, 5682, 2553, 963, 6133, 9823, 8699, 1387, 2820, 250, 7341, 6735, 4214, 3630, 8299, 1073, 5706, 8861, 8954, 9991, 6495, 6031, 4133, 8381, 8201, 1660, 8929, 5692, 3329, 2470, 6873, 2405, 5490, 6245, 2111, 6458, 8224, 9785, 4272, 5866, 6890, 9479, 9362, 9267, 683, 4891, 9110, 6059, 3128, 2089, 1303, 7653, 6342, 9191, 1237, 7025, 3616, 937, 8945, 1210, 8899, 6373, 6842, 9775, 1637, 8238, 5661, 3839, 9304, 9753, 1169, 689, 3244, 1625, 9663, 276, 3864, 9993, 717, 4524, 5524, 5998, 1004, 9820, 2409, 1950, 2456, 9272, 2501, 4217, 3143, 8928, 1824, 2112, 2787, 9130, 1590, 9361, 8870, 7348, 8523, 9107, 7063, 1245, 7318, 1918, 1971, 6723, 6226, 6874, 782, 2265, 1952, 5113, 3274, 4936, 8551, 893, 673, 5213, 1989, 6541, 2133, 8794, 4906, 5226, 3477, 1776, 6233, 8409, 6037, 8138, 9089, 8011, 3275, 1192, 7190, 6382, 3983, 7790, 7075, 9174, 7247, 1902, 8396, 3753, 5385, 9037, 6727, 292, 6766, 5930, 2048, 5353, 1125, 8838, 1524, 5925, 7824, 7922, 9416, 3299, 6115, 1419, 5727, 6571, 9610, 1702, 3736, 4196, 376, 9906, 9248, 6353, 7937, 9661, 7122, 38, 753, 7052, 8772, 5869, 1961, 7368, 7062, 2018, 8783, 382, 9930, 2150, 5730, 5570, 7671, 2512, 8436, 4917, 4983, 1596, 9743, 4601, 345, 8804, 710, 3795, 8721, 4919, 9913, 6461, 3974, 9014, 9099, 3771, 6296, 5617, 9137, 9342, 6088, 6938, 6487, 2271, 9987, 8216, 8605, 5493, 9710, 6671, 6937, 8997, 7227, 5222, 8866, 9741, 9658, 506, 754, 8511, 2064, 7954, 1157, 5424, 4582, 4063, 2479, 9209, 8362, 7389, 6223, 8686, 9468, 3791, 6759, 8087, 5467, 4637, 3902, 901, 9352, 6178, 5310, 9128, 1213, 6692, 468, 721, 6137, 6750, 3017, 4634, 1164, 8561, 9569, 6125, 984, 4017, 5489, 9356, 9548, 9148, 4665, 7902, 5837, 3131, 7206, 6764, 4628, 4000, 4005, 6086, 8738, 7568, 2776, 9700, 5332, 4985, 7186, 1980, 2347, 5796, 8057, 890, 1100, 2697, 4085, 2099, 3363, 2597, 9835, 7736, 3261, 2570, 1074, 7538, 9046, 3040, 8117, 798, 2609, 231, 5437, 7485, 5811, 3773, 6676, 331, 4416, 5920, 6531, 7112, 7841, 5371, 1526, 1634, 8546, 7315, 2798, 5041, 1503, 3369, 9285, 1489, 6062, 5771, 9003, 9102, 1285, 2066, 2129, 4895, 2711, 8155, 2864, 8840, 7022, 6268, 3659, 2909, 694, 9020, 2954, 9846, 7259, 1035, 7416, 9679, 8419, 5917, 8426, 8649, 1211, 1383, 6607, 7679, 7962, 2489, 2668, 799, 4905, 9705, 2866, 827, 5658, 4477, 7403, 6755, 6051, 4935, 9487, 7041, 2505, 6472, 2540, 8113, 2001, 8998, 5500, 2000, 3517, 2865, 949, 7529, 1362, 2836, 1123, 3252, 2902, 8309, 6823, 4574, 4773, 8188, 5326, 3386, 5245, 145, 2603, 1423, 1746, 1364, 1310, 5037, 6228, 2073, 903, 8638, 7427, 8683, 4330, 7775, 3742, 6135, 5447, 148, 7450, 9735, 1861, 1873, 9984, 6794, 9133, 7928, 3198, 8308, 8147, 6412, 1548, 3663, 6012, 2026, 8325, 2276, 253, 5328, 1617, 5329, 9321, 9719, 8923, 697, 8703, 8693, 7321, 7441, 3183, 9106, 3442, 9771, 1881, 7263, 8583, 1586, 268, 7695, 2059, 5065, 3075, 9408, 9251, 5789, 2810, 9346, 1180, 6610, 4729, 2740, 6322, 5514, 3246, 6639, 2084, 6476, 311, 8975, 9623, 5285, 5670, 6845, 5940, 4832, 6700, 9228, 2636, 113, 4675, 9079, 6908, 3389, 8331, 9482, 8664, 5203, 5364, 5885, 8962, 8599, 1228, 7099, 9434, 8192, 8438, 1191, 3755, 1377, 9782, 7885, 1954, 4720, 6114, 4630, 6892, 4523, 9816, 8283, 4442, 3992, 2599, 6399, 943, 9660, 8474, 8644, 1406, 1886, 193, 847, 2324, 3716, 9734, 8008, 3301, 9804, 7331, 1494, 9587, 548, 232, 6587, 7468, 7700, 9021, 6294, 1220, 1706, 1779, 2945, 1836, 500, 1378, 9047, 222, 4159, 7692, 2799, 2050, 7432, 8618, 7420, 6249, 7111, 1791, 1264, 1265, 7297, 8116, 1884, 1855, 7410, 4787, 7971, 5829, 617, 2382, 3250, 3789, 353, 3495, 4866, 33, 6546, 3681, 2762, 7613, 1901, 3397, 9847, 3653, 1384, 3216, 4909, 8656, 1087, 9441, 5232, 4514, 5288, 5999, 1688, 8279, 7096, 2699, 4910, 7595, 9929, 8223, 205, 7537, 9293, 3404, 4194, 6208, 3493, 511, 2480, 5808, 4301, 80, 2045, 5445, 9227, 4792, 5080, 2726, 9920, 2054, 9500, 5593, 7008, 9761, 4823, 5761, 5726, 2396, 9016, 4704, 7471, 3587, 7114, 3629, 1158, 5956, 230, 2227, 2754, 4048, 9215, 7903, 4836, 8077, 7419, 5483, 5301, 7668, 2935, 5583, 6800, 2191, 7474, 4930, 614, 4182};
int _B[] = {2099, 1178, 6755, 673, 9133, 1123, 5847, 649, 6652, 1629, 8167, 9965, 4219, 1385, 3077, 5688, 205, 6202, 572, 5057, 1768, 4786, 4917, 9581, 601, 6794, 3773, 4338, 8591, 2588, 8551, 4797, 3666, 4173, 5218, 4133, 9587, 9802, 2301, 3175, 9912, 3697, 5920, 4425, 8558, 9099, 1180, 2347, 851, 8954, 9543, 1377, 8396, 2726, 3075, 9690, 5811, 2512, 8480, 661, 7096, 8546, 1423, 7544, 3902, 3139, 8797, 9468, 8087, 23, 4936, 9963, 2259, 10, 4001, 8430, 9875, 5629, 1590, 1752, 6322, 3791, 9167, 3442, 3449, 9700, 4524, 5126, 1980, 9847, 9834, 397, 9209, 2139, 2420, 6226, 2179, 9775, 7616, 3629, 943, 4630, 970, 6296, 4866, 2569, 3786, 3805, 5300, 3517, 3026, 148, 3418, 7736, 1932, 733, 121, 8962, 2499, 6268, 2711, 8419, 1827, 56, 9272, 7556, 7523, 9860, 3092, 5730, 3725, 2925, 111, 3104, 5491, 3299, 3789, 6918, 7917, 7543, 7315, 4608, 6723, 2945, 5660, 548, 2326, 5570, 8283, 5026, 5735, 1849, 2411, 7668, 9638, 7229, 3252, 2553, 97, 2089, 5310, 89, 6371, 9067, 8102, 3130, 5430, 6086, 5290, 1838, 7653, 6678, 7617, 1270, 4379, 8334, 6233, 2479, 5134, 822, 2597, 9242, 1304, 9130, 3875, 764, 2866, 8999, 6541, 6435, 8134, 5203, 5523, 8282, 5682, 6348, 8838, 1894, 5121, 5900, 9215, 9943, 4451, 6671, 7944, 493, 9069, 8878, 8683, 7903, 2327, 9293, 2265, 272, 1868, 7083, 5765, 1913, 1780, 4274, 3860, 8135, 1904, 541, 8847, 3244, 6018, 4762, 113, 1873, 1210, 4416, 6890, 5469, 4891, 4983, 8491, 9081, 3167, 3996, 6059, 6948, 9479, 4223, 6708, 9710, 1886, 581, 5706, 7318, 9417, 746, 5956, 1596, 7247, 2369, 8285, 6617, 628, 50, 1871, 7589, 8484, 6373, 9811, 4688, 1192, 3616, 1552, 1844, 1258, 2923, 9227, 8455, 6764, 7450, 9361, 7368, 4750, 4854, 6022, 4076, 4800, 216, 4301, 9922, 3988, 6370, 8116, 1663, 8143, 5702, 2480, 8884, 4930, 9639, 8928, 837, 3630, 4947, 1220, 2176, 4159, 2799, 2606, 8923, 4840, 1585, 3312, 511, 5899, 4632, 1960, 2334, 2289, 9373, 3131, 3753, 6037, 7384, 9213, 8182, 6144, 5195, 6340, 2981, 1961, 847, 8299, 5179, 841, 5617, 6886, 27, 4997, 5884, 2346, 5158, 9346, 2754, 1857, 9194, 5489, 7351, 4738, 3741, 2992, 4567, 1127, 1702, 7409, 4330, 3646, 1158, 2980, 6908, 3386, 4894, 7613, 9020, 8523, 6597, 2683, 9753, 7468, 1328, 2467, 6690, 9984, 3941, 1884, 1004, 7931, 7399, 988, 715, 7271, 9487, 9854, 5693, 4832, 3212, 7165, 4058, 8926, 3296, 4910, 3587, 2740, 7331, 2470, 2339, 2745, 3090, 160, 1574, 6036, 1384, 1296, 2354, 1749, 1049, 9184, 8035, 912, 3243, 6154, 623, 3744, 3301, 5364, 9243, 6953, 8719, 8866, 5036, 3044, 473, 5634, 386, 2129, 1968, 452, 8293, 9409, 4000, 2890, 9993, 9728, 4448, 1455, 7062, 1706, 9340, 1544, 4823, 3016, 3283, 7887, 5578, 5524, 1074, 1428, 9767, 7163, 2112, 5065, 6062, 5686, 8997, 4132, 3141, 4437, 7403, 1835, 2518, 9951, 1640, 8303, 6458, 9991, 8718, 3371, 6193, 2400, 9021, 9110, 8664, 5525, 1952, 6140, 5885, 1589, 5207, 721, 5692, 520, 6135, 7538, 7230, 5437, 8638, 4388, 8394, 2446, 3040, 7015, 5514, 9352, 5131, 6117, 4514, 8216, 2501, 6472, 345, 6688, 3477, 9146, 6573, 7671, 8226, 1524, 2396, 1791, 4495, 5940, 7785, 4711, 5727, 9016, 280, 276, 9122, 9976, 3541, 7379, 8696, 4008, 4237, 1881, 2018, 4739, 7065, 8713, 4582, 2836, 7489, 2078, 7918, 3404, 7950, 789, 6489, 3118, 633, 2392, 2204, 9102, 8031, 8698, 334, 5301, 5909, 4652, 580, 6415, 3037, 9128, 2489, 1661, 2328, 4199, 2776, 8224, 7907, 9174, 7471, 4291, 1331, 9089, 5245, 2412, 2226, 5593, 7524, 6934, 173, 79, 2451, 7709, 8595, 883, 7186, 6878, 4126, 8736, 5633, 331, 8804, 9578, 478, 2276, 5385, 4646, 4955, 8899, 1954, 5827, 8772, 1383, 1686, 4812, 4004, 6297, 1093, 9888, 8699, 2256, 1406, 1280, 1240, 5925, 2481, 8644, 5114, 4442, 6128, 1617, 1537, 6994, 5424, 5467, 1200, 5095, 1087, 9228, 3126, 347, 1115, 5946, 9658, 4166, 3675, 8848, 688, 9646, 799, 4149, 4517, 7775, 3987, 4160, 656, 2120, 4457, 5328, 1349, 5041, 6354, 8215, 8042, 1302, 8827, 3063, 9351, 5808, 2965, 2274, 7420, 4085, 5926, 9267, 5889, 2271, 7190, 9917, 3912, 9356, 7206, 9433, 5251, 4940, 1244, 9171, 9037, 3663, 8145, 1997, 162, 7441, 5438, 9986, 1586, 679, 2971, 1319, 6629, 3025, 4884, 9589, 7228, 7723, 9623, 1191, 1201, 8011, 3716, 1688, 3452, 8514, 7679, 9611, 3273, 7352, 2865, 8656, 2045, 6024, 9989, 798, 2699, 126, 2363, 7025, 9251, 4465, 4634, 2111, 1600, 2073, 7178, 9500, 9408, 5460, 705, 6823, 3128, 4352, 7075, 2798, 1481, 1953, 547, 3615, 7516, 8018, 743, 6239, 3604, 9503, 2787, 1213, 8169, 3242, 7365, 38, 9248, 4787, 1916, 6137, 7648, 8945, 6630, 7474, 6353, 2158, 3216, 614, 1040, 8238, 8686, 8206, 3275, 5658, 2072, 818, 1100, 2759, 3653, 3397, 2397, 4621, 5548, 7880, 8916, 3454, 7419, 9552, 4117, 6245, 1815, 5999, 8287, 6264, 2903, 9784, 7529, 2474, 533, 8265, 7079, 6294, 6391, 7470, 9734, 4998, 5851, 2063, 1190, 5425, 6945, 4991, 8649, 6190, 9079, 5295, 4690, 6282, 1795, 7099, 447, 3779, 6587, 2498, 7231, 1310, 6750, 6845, 9366, 8722, 6104, 1859, 8188, 7009, 2570, 6996, 2557, 3543, 292, 6607, 729, 6110, 3495, 7341, 4595, 4063, 482, 2082, 683, 1179, 2151, 2189, 749, 5051, 8465, 5670, 9680, 9226, 9735, 8605, 9825, 9678, 4272, 8006, 3289, 7928, 5455, 8840, 753, 8207, 7971, 4841, 5205, 7656, 3274, 4240, 2862, 5293, 1387, 8362, 125, 8297, 3143, 963, 3450, 6588, 6571, 4893, 2696, 8763, 1355, 2762, 2636, 9343, 2668, 819, 5564, 6342, 4720, 9565, 6766, 9615, 8193, 8520, 4826, 7346, 131, 1976, 2150, 7022, 5500, 4989, 4602, 1779, 7416, 4919, 7885, 2935, 1989, 6114, 1164, 8981, 5003, 4656, 3841, 9516, 8026, 6895, 8138, 9342, 2842, 3154, 4895, 6873, 1271, 4836, 3329, 4469, 3950, 2456, 9181, 7999, 6063, 9763, 6855, 5340, 3421, 9792, 7568, 1660, 3742, 9751, 8721, 6223, 5249, 8648, 6804, 8230, 8462, 4396, 6825, 3129, 220, 642, 5583, 8616, 4017, 311, 6487, 8643, 5497, 6529, 609, 440, 4906, 6920, 8991, 6012, 6327, 8258, 1368, 7361, 6995, 2893, 1918, 6639, 8155, 9905, 9582, 250, 9785, 8600, 7937, 8351, 9187, 5576, 1484, 5025, 8535, 9071, 9816, 903, 2201, 5866, 3344, 231, 6249, 5482, 4294, 8281, 1228, 8113, 6399, 9663, 1419};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
