#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {1744, 3895, 2184, 6524, 4764, 6487, 5939, 9849, 8920, 2356, 429, 8364, 5000, 1449, 2743, 9599, 3714, 1759, 6162, 2837, 6283, 4121, 6672, 6087, 5286, 6055, 8926, 7244, 3620, 9188, 9834, 4606, 527, 9372, 5311, 6791, 5625, 6705, 7793, 7117, 3669, 8615, 3108, 3806, 2497, 5245, 619, 4362, 2821, 9216, 6625, 1253, 367, 6853, 7392, 64, 5185, 2167, 5178, 1228, 7156, 8625, 7259, 4355, 9384, 6341, 3454, 8124, 5558, 7714, 1020, 7747, 9217, 5349, 5392, 4820, 5696, 9536, 8011, 4271, 5780, 9679, 9168, 4141, 1372, 9740, 8503, 2596, 4061, 9732, 494, 4179, 8755, 4736, 9836, 9480, 9993, 346, 6138, 7219, 6974, 4129, 2019, 8085, 2486, 9069, 2209, 4824, 8019, 2097, 5959, 7183, 158, 2120, 5608, 8119, 8012, 5937, 2872, 2339, 6204, 9775, 318, 9138, 7381, 931, 342, 4882, 9492, 4276, 3829, 9273, 1343, 4422, 6585, 8149, 1856, 5193, 1550, 8603, 5575, 7645, 3297, 991, 4624, 4591, 754, 9650, 5199, 2372, 7580, 9723, 5114, 4330, 8979, 2663, 8673, 9340, 6690, 8465, 8671, 8070, 6207, 4603, 1030, 4022, 1436, 8916, 2768, 7383, 3396, 1753, 1693, 3986, 5680, 6753, 1531, 1415, 37, 7867, 5028, 8651, 4713, 3076, 5090, 534, 8039, 6109, 3961, 9633, 8703, 7908, 5684, 412, 1092, 3173, 117, 31, 2582, 2669, 3841, 3808, 967, 6384, 3920, 5514, 8796, 6576, 3670, 2406, 740, 7212, 1801, 5615, 3573, 6614, 6770, 3580, 7352, 5655, 3103, 1676, 8790, 9785, 6876, 904, 1186, 7504, 6218, 2430, 3075, 7789, 930, 5710, 4790, 1545, 4068, 1102, 546, 1812, 4324, 3412, 4051, 7739, 2946, 3342, 9288, 2777, 6866, 1488, 2749, 889, 7397, 7680, 2695, 3717, 3500, 9497, 9778, 3660, 592, 5320, 7632, 3021, 4059, 9977, 7348, 5730, 3169, 1685, 1292, 7786, 4446, 1956, 7534, 3565, 4345, 9402, 2740, 7087, 3817, 5345, 1675, 3765, 4015, 480, 2778, 1370, 2037, 4057, 8599, 3952, 7615, 7473, 5846, 9746, 2472, 5363, 5972, 1398, 8116, 830, 7525, 6859, 5966, 5475, 6060, 1653, 4311, 5241, 6190, 4982, 8141, 7512, 1695, 2439, 1780, 6640, 7402, 6950, 1638, 4889, 8477, 5553, 4371, 5562, 7189, 9408, 9719, 8366, 9665};
int _B[] = {9931, 117, 2372, 5178, 6755, 4806, 8796, 1463};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
