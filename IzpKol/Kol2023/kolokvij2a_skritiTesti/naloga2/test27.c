#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {4930, 711, 5611, 1998};
int _B[] = {5868, 7603, 3600, 973, 4136, 8366, 1794, 204, 103, 8358, 8821, 9254, 1479, 1040, 6278, 2197, 8463, 6302, 100, 2053, 8119, 2838, 8348, 9559, 4828, 1687, 5012, 7398, 4778, 8592, 518, 7811, 5245, 589, 7941, 2166, 6301, 1375, 591, 8121, 3628, 9942, 4035, 8579, 6947, 7369, 8021, 1740, 6788, 979, 9470, 794, 1986, 8499, 5863, 478, 9435, 2945, 154, 4589, 8595, 3565, 9089, 3781, 6377, 982, 7074, 9753, 5888, 4853, 7448, 7874, 3294, 3860, 3556, 7514, 9877, 7159, 645, 4822, 5747, 8507, 6576, 711, 4114, 3805, 3817, 5920, 144, 9408, 1404, 1246, 3627, 9728, 9413, 9614, 189, 926, 2357, 9428, 6801, 6561, 5342, 9367, 764, 1588, 8784, 1578, 5781, 1775, 6749, 5634, 3271, 6605, 4001, 3314, 5368, 1568, 9464, 2834, 6642, 1314, 2765, 1467, 6675, 5754, 7580, 8659, 3098, 6364, 791, 3798, 8321, 7061, 8764, 4850, 7808, 7237, 2417, 479, 6590, 5044, 4799, 3613, 3677, 9345, 9708, 8539, 9771, 6604, 8694, 5219, 2697, 1830, 1504, 9715, 5717, 2457, 2577, 2240, 8370, 7747, 7530, 1817, 5078, 6187, 1472, 1064, 2147, 986, 7488, 2340, 504, 8657, 4058, 8106, 842, 7422, 7205, 8003, 266, 2035, 1157, 7691, 2324, 4693, 374, 4427, 6339, 592, 5878, 5830, 9263, 9769, 5919, 4994, 5775, 4151, 9179, 5601, 308, 7432, 1068, 2337, 8016, 2966, 6483, 3012, 7676, 5468, 9972, 6710, 494, 121, 4097, 1601, 9598, 9232, 9530, 6757, 3530, 4567, 323, 1301, 3519, 2176, 3083, 2491, 5324, 9064, 8807, 5042, 3013, 9385, 7931, 2692, 4225, 8043, 8094, 9945, 8454, 5073, 649, 6111, 5417, 9699, 4531, 775, 6556, 8720, 5114, 4084, 9268, 3439, 6115, 8342, 3368, 3081, 9129, 1144, 9197, 5810, 3803, 6406, 4130, 371, 8714, 3782, 1956, 7449, 4500, 3766, 5978, 6240, 216, 2241, 3415, 1316, 4047, 8428, 9536, 5145, 1547, 2117, 3143, 1828, 7655, 8434, 6548, 6696, 8030, 3531, 8471, 9724, 5827, 2626, 258, 6705, 9093, 1698, 5977, 2604, 9647, 3339, 3632, 4152, 3288, 1866, 676, 7864, 5447, 1998, 3173, 5313, 2059, 9650, 217, 7015, 4750, 3698, 5913, 2745, 4734, 8635, 7924, 6070, 1835, 2218, 5630, 5285, 5742, 3267, 3714, 9867, 2844, 6914, 302, 824, 8542, 475, 1684, 5054, 9711, 5509, 9666, 5065, 6623, 5544, 792, 8516, 8424, 8990, 5378, 1590, 1155, 4127, 58, 8584, 2234, 7892, 8423, 9617, 9583, 2068, 6261, 7200, 1707, 8937, 7476, 3973, 501, 910, 6349, 2386, 2717, 3575, 2774, 2375, 7370, 707, 9380, 2148, 9670, 1966, 634, 7849, 7048, 1944, 5394, 9130, 1209, 5440, 8005, 6078, 2704, 4380, 5555, 4935, 309, 6324, 5372, 3043, 565, 2470, 9987, 1274, 7241, 6318, 593, 5760, 7315, 908, 971, 7409, 9459, 9434, 9371, 1166, 9168, 3715, 2352, 9433, 7479, 9725, 5301, 3479, 5290, 160, 956, 3752, 4435, 9118, 3061, 1651, 4855, 6212, 751, 2899, 3869, 7838, 6145, 8001, 1505, 5135, 6042, 2049, 1623, 7935, 4496, 4282, 7577, 9026, 7176, 7387, 6769, 4014, 2925, 5837, 7107, 8968, 6771, 6403, 1645, 2510, 1648, 2772, 7795, 8677, 1272, 4871, 2795, 7033, 8766, 9712, 311, 1136, 2245, 1377, 9431, 327, 1146, 367, 8485, 7556, 4776, 4519, 5401, 4028, 2670, 6812, 5966, 4832, 418, 9804, 4250, 140, 4618, 8800, 2531, 1896, 5005, 8866, 7266, 2952, 5487, 793, 3732, 605, 7559, 6341, 3020, 4543, 4319, 1570, 5243, 2828, 6245, 9430, 647, 1913, 7308, 6683, 9579, 3317, 1987, 2860, 7121, 3839, 1109, 6501, 2590, 825, 4557, 3857, 436, 8717, 7051, 9383, 6781, 8401, 8466, 4461, 9971, 352, 3991, 2445, 5606, 8172, 678, 4450, 883, 6698, 2319, 6246, 9311, 7734, 833, 9609, 7790, 893, 5227, 6101, 5335, 8193, 2827, 8792, 9806, 9359, 8674, 6234, 3609, 7022, 6033, 1045, 5248, 7723, 3594, 3200, 9420, 8260, 8102, 3377, 5797, 287, 1150, 4440, 7893, 4940, 8614, 7025, 5056, 882, 7888, 4214, 1351, 7463, 4744, 8371, 6797, 9544, 3493, 9022, 3391, 6866, 6170, 746, 8177, 4967, 195, 5207, 9460, 8932, 8708, 2953, 7652, 5151, 9790, 461, 1921, 3237, 6656, 7796, 4428, 6089, 5655, 9748, 8161, 6878, 4468, 5246, 7737, 1560, 5286, 2964, 6250, 8325, 2563, 991, 8743, 5076, 6039, 5420, 403, 7434, 528, 5200, 9455, 7885, 9747, 7470, 1951, 4900, 2987, 3011, 7345, 7117, 9199, 9015, 46, 2066, 8023, 6260, 3913, 4566, 4699, 9966, 2883, 8719, 9491, 9916, 4012, 3004, 4712, 4383, 7728, 9550, 2425, 5877, 807, 7821, 1955, 7776, 599, 1210, 9904, 1390, 8376, 3946, 752, 6627, 443, 7545, 7427, 3323, 9308, 7217, 1176, 4999, 8114, 5941, 6153, 6784, 7677, 4973, 2273, 8699, 3264, 5988, 3248, 1683, 8368, 9700, 1712, 6936, 3912, 4649, 5923, 3809, 1858, 6803, 6850, 681, 2005, 2070, 3127, 4746, 8631, 9655, 1110, 4129, 4590, 4369, 6917, 5864, 5709, 2141, 6315, 2743, 7381, 665, 7000, 3742, 4603, 3998, 9288, 2753, 7452, 2465, 1511, 4811, 1457, 3555, 6808, 3034, 9777, 4910, 35, 7519, 838, 1486, 6565, 8957, 60, 8964, 4112, 3027, 2243, 6018, 810, 8160, 1502, 3583, 2434};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
