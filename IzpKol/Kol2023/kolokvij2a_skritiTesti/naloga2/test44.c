#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {8720, 8813, 4133, 492, 1186, 1772, 802, 3401, 3433, 8739, 2593, 5620, 7329, 7166, 6467, 4582, 6939, 2377, 3117, 1806, 3968, 745, 6987, 2453, 9030, 6540, 4412, 6455, 1583, 8113, 7818, 3714, 5068, 7510, 8253, 8190, 6464, 2808, 8180, 4027, 2215, 759, 5065, 1900, 8614, 1541, 2601, 2032, 3319, 8460, 7626, 4041, 8405, 8114, 1366, 9055, 7598, 8258, 2105, 4138, 2051, 7065, 7532, 3129, 7693, 491, 5929, 7305, 6999, 6382, 7158};
int _B[] = {7241, 2611, 5839, 8170, 710, 2009, 5070, 7233, 1579, 3802, 177, 4599, 7576, 9280, 5147, 9285, 2793, 3641, 110, 2277, 9382, 4937, 4976, 4898, 8351, 7921, 1633, 971, 6663, 6504, 728, 5444, 938, 9611, 9547, 9313, 344, 936, 1619, 655, 1832, 4543, 3129, 8095, 9086, 2947, 3827, 5691, 1481, 8860, 5830, 9256, 3379, 3452, 8469, 1163, 5873, 724, 9172, 9195, 3834, 6673, 473, 5693, 4061, 8899, 9864, 7625, 4269, 9447, 6895, 6033, 298, 8290, 8276, 1104, 7052, 1089, 4858, 3028, 2482, 7614, 4262, 4740, 1623, 8246, 6586, 802, 6929, 3206, 3790, 1448, 840, 803, 5512, 4625, 5932, 9709, 9055, 683, 8972, 3310, 7656, 5065, 2852, 1251, 2386, 2234, 7967, 5290, 4217, 6989, 5621, 6911, 7320, 5567, 4612, 4508, 3560, 3165, 7106, 6474, 7342, 8830, 1937, 4953, 8302, 2825, 412, 9005, 176, 9310, 3968, 3268, 4259, 9259, 8521, 3233, 9156, 1460, 2591, 9763, 9253, 9378, 2368, 239, 5777, 958, 8196, 4637, 9800, 7550, 1902, 3185, 2394, 4445, 3879, 2032, 7699, 4405, 7513, 6288, 6540, 4072, 1979, 2605, 4593, 4357, 1692, 8558, 7705, 9263, 5669, 8614, 2660, 6707, 2124, 6909, 622, 4071, 4932, 9052, 3447, 2308, 8910, 8197, 8096, 7793, 2971, 8421, 3265, 7287, 869, 7504, 6170, 6758, 4194, 4208, 3102, 1326, 5399, 5262, 4439, 6391, 4388, 3289, 158, 1890, 7987, 3924, 2981, 7726, 1429, 7059, 5478, 4755, 7141, 5521, 5195, 966, 8813, 7084, 1489, 9030, 4145, 4314, 3714, 8259, 2865, 8113, 4441, 2749, 996, 2792, 7626, 6627, 7446, 3925, 5425, 6038, 5071, 9592, 5474, 7678, 7713, 6932, 9149, 7403, 9309, 8180, 4951, 1775, 1670, 7698, 6350, 8588, 5653, 8058, 3740, 3249, 4685, 1515, 6013, 6999, 2907, 8640, 9843, 6172, 1759, 372, 2136, 1004, 5067, 3433, 415, 9560, 1899, 2132, 5430, 1170, 8736, 103, 6820, 788, 4770, 599, 8263, 7849, 20, 3820, 8643, 1332, 8756, 1548, 4595, 3533, 674, 8601, 194, 2612, 3516, 2646, 7867, 2172, 860, 4109, 8925, 2823, 8724, 4330, 7293, 4883, 317, 156, 4518, 2093, 9440, 154, 2828, 2006, 6339, 530, 9955, 701, 4668, 9949, 2491, 8149, 2927, 1464, 8024, 3400, 1258, 8654, 2899, 6363, 4979, 8130, 124, 3683, 7332, 2839, 7145, 1994, 9211, 8033, 6345, 8390, 4829, 2443, 2973, 7636, 8131, 5341, 3328, 3007, 4412, 2714, 1131, 382, 5016, 5398, 8054, 5828, 6186, 4573, 638, 8490, 7157, 3151, 4994, 6316, 8358, 7283, 9430, 765, 1984, 3363, 165, 3673, 7195, 894, 7326, 619, 1395, 2952, 640, 7693, 573, 1556, 3111, 7686, 3689, 9727, 7839, 8343, 4876, 3304, 976, 1206, 8335, 2593, 3645, 7376, 1181, 955, 591, 5643, 4606, 8716, 5929, 7975, 2332, 4472, 6113, 4368, 4982, 7677, 7874, 2534, 6668, 8008, 6599, 769, 9831, 1279, 1900, 5473, 4437, 9762, 2919, 9624, 3338, 6140, 9626, 9962, 4386, 6421, 4165, 9038, 6978, 2933, 4540, 5555};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
