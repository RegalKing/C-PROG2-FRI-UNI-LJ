#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {7095, 4506};
int _B[] = {560, 7820, 710, 1633, 4780, 7959, 2175, 2199, 4506, 7998, 8728, 1289, 9599, 7559, 4182, 5056, 5657, 6035, 1786, 8111, 523, 7816, 234, 6471, 8122, 1540, 2786, 3405, 5314, 2411, 8518, 435, 2484, 872, 846, 8807, 3419, 6573, 8146, 6022, 3459, 3679, 8687, 6708, 8678, 4763, 5011, 6004, 799, 9783, 5526, 922, 9029, 3803, 2555, 5604, 1181, 2930, 7238, 8710, 7778, 9532, 6554, 2773, 6432, 5881, 128, 6792, 8639, 8251, 8473, 4013, 3677, 8869, 4409, 3065, 5539, 5724, 7069, 1805, 1183, 8224, 7223, 2710, 2524, 9184, 1875, 7570, 8003, 8541, 5827, 4523, 7931, 7748, 4555, 1411, 5399, 7722, 6655, 4696, 5838, 433, 5735, 1434, 2664, 5537, 9102, 7197, 7527, 1758, 8860, 4795, 1001, 9023, 8879, 1232, 4030, 4651, 7277, 3850, 6480, 8732, 1505, 7056, 7008, 2631, 4449, 1848, 3749, 2400, 7751, 5298, 7591, 5704, 6466, 7663, 7765, 4172, 5933, 6061, 7103, 6884, 5742, 9365, 1874, 2758, 9576, 8435, 3848, 9241, 9988, 3508, 8890, 2901, 5215, 9157, 8449, 4335, 2819, 3145, 8143, 8574, 6117, 7301, 1400, 7129, 6417, 7909, 2789, 6257, 1604, 3829, 787, 5219, 5484, 2059, 5998, 4344, 4327, 5770, 8183, 9235, 4087, 5359, 4175, 6468, 9550, 9052, 3227, 7649, 7505, 9744, 5301, 358, 950, 3623, 1781, 149, 1206, 2556, 4102, 9137, 145, 4201, 2784, 839, 7637, 7666, 6711, 2423, 3941, 4832, 9230, 7819, 9243, 276, 9225, 9016, 9514, 6062, 5073, 5452, 4544, 8597, 1342, 8241, 2035, 9583, 9650, 5930, 1824, 6003, 8005, 9173, 758, 5382, 8073, 1488, 9780, 6267, 3012, 7734, 5276, 9858, 6390, 1296, 4024, 6111, 811, 8374, 5547, 5573, 1662, 4171, 6146, 9594, 4496, 2038, 3298, 4641, 5261, 8458, 999, 2014, 570, 8056, 7596, 297, 1132, 2916, 9323, 4697, 7843, 4264, 5808, 3417, 8635, 4894, 4955, 4049, 8511, 5308, 2689, 671, 9035, 7077, 9101, 8852, 344, 3101, 885, 1841, 1168, 2256, 8216, 4060, 7314, 9685, 4714, 413, 8662, 398, 9228};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
