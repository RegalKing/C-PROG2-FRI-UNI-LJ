#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {7992, 6763, 5232, 5898, 23, 6192, 3040, 1109, 8586, 9502, 1354, 9984, 1855, 5019, 5131, 4972, 1332, 9632, 4186, 4627, 5512, 8842, 8103, 8900, 8611, 1892, 2157, 5330, 6055, 2576, 2156, 7499, 2774, 9513, 6337, 4529, 5477, 9125, 5738, 273, 3639, 3490, 3459, 7581, 5654, 8556, 6776, 133, 1596, 2856, 3439, 7408, 5926, 4673, 7003, 7676, 8212, 4069, 125, 3430, 6348, 5359, 799, 2679, 4086, 6761, 3687, 4355, 3853, 1065, 8485, 1715, 9451, 7722, 2474, 925, 5506, 7741, 2337, 7393, 7287, 5045, 472, 86, 4401, 5889, 721, 2560, 7504, 3228, 5538, 9622, 3555, 6450, 8437, 3654, 4305, 8777, 7511, 522, 6094, 4498, 4031, 3561, 929, 9559, 4451, 656, 9817, 9022, 7456, 1147, 3816, 9002, 198, 1942, 1162, 8407, 3106, 9161, 5548, 9324, 3649, 2438, 1395, 8847, 3924, 2905, 8558, 2775, 369, 8267, 1331, 811, 9839, 4158, 3831, 3642, 371, 9742, 6724, 453, 6309, 8565, 7598, 5925, 2677, 3319, 622, 937, 4093, 687, 7165, 9629, 9437, 1829, 9057, 1236, 6403, 1075, 1799, 6717, 8640, 1032, 2200, 6317, 8045, 2201, 7729, 2396, 1208, 1167, 6054, 9890, 8170, 3074, 9097, 5203, 6172, 6424, 5318, 5648, 7054, 7957, 7322, 7387, 3684, 5909, 7791, 5235, 4150, 7540, 1260, 274, 9120, 9745, 1539, 2022, 2618, 7033, 3665, 2330, 7184, 1635, 426, 6552, 4247, 3673, 1805, 8601, 9770, 4665, 7204, 9365, 4904, 7029, 7983, 2629, 582, 6071, 7678, 4526, 5918, 4145, 8068, 4960, 9270, 7478, 514, 931, 7538, 6594, 4860, 4940, 4746, 7173, 8012, 3618, 966, 9066, 7554, 1055, 7179, 8994, 8811, 4485, 6269, 3549, 4807, 5650, 6624, 8579, 8769, 8166, 5448, 7611, 714, 8997, 7395, 7468, 8774, 7654, 4001, 5188, 9998, 8067, 6685, 9492, 6319, 924, 6775, 8363, 4213, 9000, 3030, 8015, 4140, 7803, 593, 9356, 9506, 2705, 4027, 488, 3292, 6431, 3001, 2724, 8856, 5691, 785, 4584, 8258, 140, 1425, 4223, 7067, 7108, 2807, 5288, 1660, 2669, 738, 6961, 4697, 1290, 2264, 8727, 405, 5172, 9602, 4486, 3839, 9730, 6051, 766, 9986, 7739, 1703, 5998, 2794, 3494, 6384, 6859, 2355, 591, 1309, 389, 2634, 9594, 2303, 7980, 740, 7399, 2874, 8345, 5986, 8517, 3570, 1738, 9600, 7932, 916, 8009, 9464, 4991, 4466, 3243, 8360, 6449, 773, 9019, 2762, 8773, 418, 8272, 4709, 5646, 5072, 48, 5494, 5253, 8717, 9572, 7949, 8746, 8853, 1669, 6877, 280, 4260, 6179, 4629, 7304, 2627, 8540, 502, 2868, 6605, 4493, 4800, 2554, 4737, 8429, 421, 8953, 8523, 4350, 7986, 7358, 4641, 2443, 3457, 2506, 4080, 8683, 1178, 8750, 1367, 3016, 560, 9272, 2472, 8116, 5960, 606, 8264, 7857, 281, 8951, 1704, 1085, 3946, 6197, 1836, 8909, 3874, 8546, 3255, 6057, 889, 4551, 2700, 9288, 1493, 4324, 2917, 333, 3989, 7936, 2532, 5797, 7282, 3630, 2210, 6115, 4201, 3024, 6691, 864, 7556, 6041, 5561, 3076, 5160, 681, 3511, 5745, 8849, 8680, 1226, 1905, 2667, 2776, 9891, 5205, 6492, 6370, 4822, 7813, 368, 5479, 4715, 7768, 6163, 953, 8255, 5270, 8377, 778, 1242, 640, 9283, 7661, 9460, 7998, 1460, 1107, 6264, 7703, 878, 6383, 6634, 4780, 5793, 1762, 2513, 8516, 709, 2326, 4420, 7720, 9452, 7865, 8555, 6186, 2954, 7361, 8508, 805, 8971, 9228, 7609, 9273, 3563, 4652, 82, 1021, 1589, 8682, 9157, 2440, 8781, 2686, 6107, 9470, 6868, 7008, 2398, 5497, 706, 9186, 4585, 8889, 1144, 675, 325, 7182, 5515, 2225, 9702, 2508, 6228, 6464, 1706, 3042, 3540, 8984, 8650, 7840, 7419, 5907, 3092, 4507, 6795, 921, 5142, 9242, 5125, 6502, 2569, 3469, 2075, 542, 7046, 2418, 9978, 80, 9571, 210, 8076, 8671, 6656, 7148, 3672, 1180, 423, 9874, 4563, 2746, 7139, 4702, 8570, 3895, 2066, 1447, 3386, 7064, 6553, 5303, 2605, 9965, 182, 2039, 5017, 6433, 3690, 7488, 4886, 2373, 2182, 9146, 8616, 9909, 3245, 4489, 601, 980, 9246, 4175, 5156, 8175, 8965, 943, 200, 1234, 2577, 4479, 3615, 9415, 1891, 7860, 2689, 770, 1780, 6006, 2871, 3716, 8386, 2715, 2984, 2275, 2325, 8110, 2808, 4695, 9164, 4632, 1427, 2456, 7280, 9636, 5357, 5790, 2919, 9861, 7137, 4802, 3513, 7038, 9405, 9031, 9494, 1819, 8814, 2174, 8912, 9297, 7990, 3373, 4467, 4412, 1190, 2067, 8139, 8133, 8245, 8352, 3908, 6289, 2790, 9545, 1104, 3604, 6567, 2272, 7573, 8326, 7258, 2903, 4582, 4722, 9651, 518, 2613, 6208, 9325, 8243, 1710, 3729, 861, 9678, 162, 9553, 5967, 4986, 9771, 4364, 6145, 188, 7930, 8600, 3364, 7689, 5739, 7705, 4197, 3495, 9719, 1414, 7846, 6793, 7275, 3919, 4755, 2150, 1282, 3624, 9347, 7157, 9921, 8905, 8348, 5709, 8369, 1444, 5829, 7221, 6649, 8073, 5633, 5213, 4625, 5262, 1274, 2043, 4179, 7325, 2641, 5291, 9583, 7559, 6485, 1212, 2872, 1039, 6155, 6109, 7004, 506, 2688, 7792, 6030, 8509, 2223, 6857, 5300, 8826, 6902, 2161, 881, 9753, 5626, 6988, 1049, 8165, 6657, 9062, 251, 9369, 9556, 650, 6881, 7527, 1770, 9855, 2417, 3823, 1534, 958, 3922, 899, 530, 9205, 942, 7238, 8460, 7834, 2164, 787, 5927, 1071, 144, 5325, 9244, 4214, 7874, 7760, 327, 2283};
int _B[] = {2808, 1354, 4940, 8807, 4530, 4223, 2456, 8264, 3618, 2474, 8971, 9861, 3490, 2148, 9369, 8565, 2634, 3686, 7538, 133, 2418, 9186, 5278, 1147, 2164, 3736, 4881, 7912, 6898, 5927, 7148, 766, 86, 4350, 9000, 9120, 2954, 5045, 9739, 2627, 9678, 4455, 2700, 4777, 4695, 4536, 1799, 274, 3606, 8694, 8777, 2576, 3816, 7387, 5357, 2613, 2679, 2560, 1829, 389, 9753, 6208, 5889, 9261, 4498, 9356, 582, 5773, 6691, 4722, 8133, 7860, 4401, 3494, 6649, 5829, 5853, 9031, 9839, 9216, 4702, 2637, 982, 9998, 453, 7258, 3549, 8889, 9205, 9629, 9719, 1065, 6145, 1236, 369, 5626, 4197, 8459, 5885, 1386, 5512, 3561, 1071, 8814, 3642, 6717, 848, 8861, 6433, 5213, 9909, 7067, 7335, 8369, 8579, 4709, 6570, 6502, 3864, 2775, 9347, 2667, 2984, 8905, 8811, 9046, 9594, 6337, 3604, 8366, 6115, 7676, 8984, 371, 9817, 1032, 466, 942, 7609, 280, 8166, 6319, 864, 1367, 1190, 1234, 7942, 8784, 9730, 2928, 6761, 7304, 2532, 7157, 7739, 8717, 3295, 7763, 182, 6763, 3106, 6440, 9745, 4186, 5515, 6474, 5909, 826, 2618, 594, 2513, 4822, 4715, 140, 5142, 4584, 7456, 4179, 610, 5270, 8997, 3840, 3028, 6775, 4960, 4355, 2182, 3532, 8567, 2669, 6163, 9556, 5691, 8363, 1395, 9750, 1035, 23, 6776, 3908, 5577, 8165, 4904, 1596, 1855, 4466, 7768, 8508, 4740, 1328, 6006, 778, 9770, 5790, 840, 9324, 2373, 1226, 9288, 8345, 5017, 9246, 8509, 7932, 7395, 273, 7816, 5738, 318, 4069, 3615, 3639, 6960, 9019, 4517, 144, 3649, 3853, 1819, 5325, 4489, 8953, 7038, 4150, 9502, 5918, 593, 7720, 423, 9415, 5745, 7008, 8429, 1331, 7468, 7874, 3672, 7275, 8068, 6868, 4118, 8995, 9636, 7857, 4364, 3511, 251, 2355, 575, 2839, 7865, 2173, 7165, 6592, 2225, 4485, 1144, 8012, 4697, 8348, 6624, 3924, 8326, 4632, 3922, 999, 8009, 4031, 740, 8073, 5890, 721, 2043, 4625, 2947, 2272, 937, 6192, 2118, 3555, 6200, 4450, 1238, 2150, 7182, 1337, 9437, 687, 7846, 4529, 3513, 1274, 472, 652, 5479, 3495, 8555, 9506, 4213, 6155, 9452, 3661, 4762, 4507, 2554, 1425, 2066, 198, 1212, 5633, 9359, 6197, 9021, 2506, 4260, 8951, 931, 6656, 9460, 506, 9702, 2409, 3919, 5205, 8437, 8540, 2688, 1616, 8379, 1805, 8994, 2200, 4402, 8460, 7322, 1704, 9965, 1589, 3665, 7010, 1493, 3946, 2508, 6370, 9283, 9142, 5253, 6041, 5960, 5330, 7184, 8234, 4479, 5646, 2641, 7540, 2039, 4080, 3684, 3439, 1892, 7759, 5561, 943, 8724, 7137, 2780, 5019, 9986, 842, 1635, 5257, 8826, 925, 7554, 656, 6109, 6793, 7998, 7108, 6348, 488, 4807, 9984, 1622, 8600, 8965, 1104, 2807, 9066, 7722, 5797, 6956, 4335, 6989, 7499, 7957, 6795, 958, 7527, 7678, 6685, 6213, 9079, 300, 8769, 2438, 1780, 257, 4158, 5630, 2919, 2330, 8556, 7029, 7792, 6634, 2283, 1427, 614, 7805, 4746, 7990, 9146, 7399, 5926, 4679, 622, 3319, 916, 9272, 2977, 3343, 6228, 966, 6094, 9001, 405, 2303, 6859, 6054, 709, 8409, 3839, 2201, 7834, 8243, 7813, 5448, 2337, 374, 5288, 7803, 5821, 514, 4001, 4305, 9513, 8103, 7393, 3469, 5793, 4418, 2161, 1706, 681, 7221, 2229, 8045, 9584, 48, 9571, 8523, 7573, 8175, 5548, 8842, 24, 6553, 5506, 1447, 8386, 7598, 9470, 9325, 8139, 1715, 8212, 3895, 7511, 3255, 3386, 6492, 6269, 9622, 6757, 2210, 4582, 7287, 9157, 8900, 2629, 6387, 2157, 9830, 125, 4548, 9002, 2746, 655, 3040, 3690, 7361, 7179, 1605, 7796, 9545, 2868, 2677, 805, 8118, 8258, 632, 1178, 7245, 4627, 4800, 2856, 8616, 210, 6186, 4501, 1762, 4972, 560, 5203, 6403, 7004, 200, 3540, 9451, 1770, 4986, 6383, 1282, 5318, 2790, 2264, 5131, 3462, 4214, 9297, 1891, 2067, 7033, 4991, 1167, 368, 7949, 7741, 9572, 4961, 7703, 3716, 8611, 1570, 2275, 1414, 4551, 530, 4140, 7238, 6179, 8570, 5477, 2794, 7064, 1703, 5160, 2715, 1021, 3228, 3092, 8650, 5776, 9228, 8516, 3874, 5004, 8847, 7488, 7760, 7983, 7419, 3243, 1836, 9464, 162, 5125, 2936, 4759, 8272, 1242, 3292, 8015, 3687, 4451, 4569, 5235, 9583, 8076, 6264, 3831, 421, 9161, 1180, 5107, 3725, 7705, 6118, 1893, 8671, 6450, 2223, 650, 6030, 8774, 3673, 2686, 4802, 7723, 7204, 5471, 2009, 9242, 770, 4027, 4182, 4963, 9657, 5967, 80, 6071, 9890, 1669, 1710, 6024, 7930, 8072, 8245, 591, 9519, 8781, 9921, 3024, 8110, 1162, 3373, 1214, 2326, 8586, 5654, 1660, 2076, 953, 8849, 2087, 8773, 6057, 8170, 6107, 1816, 8407, 8377, 3016, 2287, 2776, 6096, 6857, 6431, 9309, 7992, 1208, 4175, 8485, 5359, 2705, 542, 9062, 8067, 5262, 9600, 8542, 3074, 2874, 889, 9430, 8750, 5156, 6449, 7032, 3001, 7139, 1049, 4201, 6961, 4247, 9365, 188, 6881, 4420, 5907, 3430, 4467, 7581, 5986, 861, 5232, 2443, 6842, 7614, 7654, 1260, 2774, 1905, 9492, 5108, 7046, 2440, 7980, 3624, 5291, 1460, 7525, 5650, 6424, 8558, 4629, 6552, 6567, 7408, 9164, 6317, 2905, 327, 82, 773, 4374, 2724, 980, 785, 8640, 7556, 532, 4665, 5739, 2577, 426, 3630, 799, 3563, 5648, 5998, 193, 8853, 2417, 2472, 3042, 5898, 4412, 2569, 6384, 601, 6902, 9742, 2398, 6485, 8912, 9125, 7358, 4563, 1444, 9559, 1290, 9405, 4755, 2673, 9553, 3161, 6988, 1100, 1107, 3457, 1077, 9022, 8683, 6051, 8267, 6668, 4145, 5072, 738, 8682, 1738, 2396, 9651, 8255, 4641, 811, 7689, 4780, 3654, 1075, 663, 5538, 4097, 7714, 2917, 7056, 1022, 924, 325, 6289, 4652, 4093, 878, 2022};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
