#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {7417, 3597, 6356, 439, 2096, 2979, 347, 3101, 2611, 4080, 3792, 5982, 5592, 4170, 6247, 8495, 4725, 5081, 7255, 9937, 2479, 3129, 1514, 7847, 7065, 4424, 1681, 5073, 8396, 4815, 4639, 72, 7711, 8951, 223, 2726, 105, 3788, 1021, 3084, 85, 9589, 1239, 908, 1752, 4660, 5278, 1432, 6642, 7820, 1459, 8900, 2706, 505, 173, 5363, 8091, 7052, 3385, 4226, 5008, 4849, 7559, 8880, 9794, 1441, 7025, 84, 1718, 7006, 4593, 7517, 6885, 464, 6069, 4393, 3029, 1386, 9923, 6730, 6164, 7675, 5528, 2307, 458, 2995, 3470, 4580, 5573, 4738, 5971, 5859, 7614, 1385, 9084, 9667, 1370, 7821, 7726, 7243, 5174, 8438, 6860, 5283, 2619, 4339, 856, 5583, 3915, 6157, 5540, 3909, 3454, 4869, 9992, 3575, 5387, 2340, 1642, 6382, 7224, 517, 1003, 1367, 7625, 5916, 5097, 2780, 1783, 1704, 802, 8045, 8311, 2701, 8820, 6638, 9491, 6439, 227, 7547, 7431, 1317, 7967, 7960, 3939, 3273, 4471, 6508, 2308, 8953, 6392, 6119, 1941, 7175, 256, 621, 2767, 7205, 3592, 8524, 1104, 2872, 6086, 9640, 2071, 4457, 3412, 7543, 6757, 5983, 2786, 4308, 2853, 6955, 2946, 679, 5740, 6196, 5935, 2278, 9300, 8004, 6848, 5589, 4144, 26, 5564, 841, 6321, 303, 6899, 6460, 9721, 8609, 2730, 3043, 5514, 2148, 8936, 3356, 1603, 8304, 1913, 1939, 1949, 9054, 7982, 4459, 5122, 8546, 2464, 9808, 9551, 1107, 8887, 3253, 3821, 2144, 767, 6690, 3803, 3426, 4888, 2051, 1054, 8742, 3370, 3967, 4584, 7474, 9722, 968, 7628, 3352, 430, 4000, 9512, 1544, 3850, 9614, 51, 5865, 4235, 7968, 8626, 7465, 6995, 4094, 8761, 8362, 2911, 9363, 5051, 2215, 8095, 3300, 4896, 2193, 7627, 2647, 7333, 1192, 4316, 6893, 6813, 5883, 9335, 8431, 7311, 963, 6053, 273, 8677, 2319, 3753, 719, 6761, 5746, 2571, 192, 6394, 8347, 8739, 3966, 9043, 6961, 9167, 7563, 443, 9784, 58, 6621, 2405, 5064, 3886, 95, 5380, 1476, 4079, 722, 7158, 7822, 3402, 9679, 3745, 3321, 9768, 6224, 5207, 7950, 1593, 9125, 7954, 1362, 3517, 2931, 9317, 9906, 7439, 9540, 7051, 3363, 5044, 6411, 7956, 6817, 1495, 5511, 6550, 4334, 8947, 2449, 1899, 8930, 291, 2192, 6270, 7681, 3633, 1293, 1242, 8904, 4739, 8725, 7871, 4402, 379, 8905, 2168, 382, 181, 4271, 4713, 9049, 5223, 6745, 619, 5829, 2851, 8436, 3314, 2766, 155, 9062, 4284, 4047, 8790, 674, 8675, 1959, 8532, 2000, 7995, 6267, 5815, 3136, 8612, 6625, 869, 7233, 1137, 2553, 1962, 7400, 5165, 8958, 3416, 6938, 2924, 7678, 4157, 1907, 9493, 8248, 6466, 2230, 9344, 9913, 1877, 9244, 8486, 109, 2745, 3080, 2814, 3662, 1945, 508, 2678, 4538, 1567, 833, 3774, 1843, 1722, 9451, 6639, 3199, 4077, 2973, 7301, 5359, 3961, 9724, 5691, 9187, 6632, 8638, 528, 9127, 4652, 8302, 3816, 2090, 9973, 7926, 5855, 1213, 8134, 3466, 3862, 4755, 2354, 892, 6495, 2926, 1519, 1474, 8773, 1418, 3935, 6141, 4558, 5410, 5245, 7704, 7437, 2030, 5686, 2023, 4762, 6708, 1110, 6074, 2016, 2673, 3058, 244, 3366, 7843, 4104, 7115, 8386, 9814, 9116, 4069, 3536, 2796, 4938, 5013, 7440, 8339, 726, 3658, 5604, 5307, 4449, 6913, 8099, 8180, 7921, 7524, 6854, 4699, 467, 6679, 9739, 4105, 4722, 6583, 4330, 6569, 9643, 3834, 1147, 7297, 7747, 7231, 1670, 4569, 122, 9669, 1687, 3539, 6719, 7837, 9569, 3876, 1227, 9585, 493, 7933, 9599, 6841, 9014, 1824, 8830, 176, 8033, 2036, 7144, 5243, 7293, 6874, 953, 6656, 8043, 203, 626, 2770, 1405, 9291, 7375, 8479, 1589, 2257, 7014, 8056, 3414, 1010, 4288, 8721, 2887, 9470, 6829, 8419, 4666, 5121, 6715, 7470, 1090, 4644, 5620, 9560, 7776, 468, 4440, 5129, 1330, 1533, 9526, 4859, 5294, 7349, 5707, 9516, 6966, 9425, 37, 3933, 191, 3931, 2085, 6587, 4222, 8443, 1351, 7677, 1693, 6850, 6500, 2396, 7415, 6839, 9697, 3036, 4383};
int _B[] = {7767, 8843, 8311, 5603};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
