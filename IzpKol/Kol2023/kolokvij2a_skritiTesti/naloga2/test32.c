#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {8049, 2053, 1173, 867, 3020, 7960, 4619, 1177, 4596, 2349, 7318, 5154, 4920, 6728, 3754, 731, 5067, 9771, 5032, 958, 7619, 5553, 4079, 3081, 8344, 9030, 332, 560, 8239, 4481, 751, 6801, 6709, 3766, 3399, 9168, 2900, 7520, 1536, 8042, 3472, 9937, 2167, 3811, 7822, 6413, 4094, 553, 7646, 4095, 9735, 8182, 1158, 9122, 9043, 15, 8456, 3148, 9796, 6132};
int _B[] = {9188, 6555, 6029, 4545, 208, 9346, 6564, 3766, 2115, 7982, 5557, 1855, 9021, 958, 6856, 5754, 5798, 2694, 2867, 2321, 7700, 6723, 9168, 7737, 7023, 2244, 8182, 9725, 1173, 4619, 5422, 403, 2633, 5067, 4345, 7555, 8618, 5498, 9968, 3020, 5265, 2853, 4161, 5512, 2280, 3171, 4487, 874, 2554, 4244, 7669, 751, 5910, 1288, 7551, 9703, 9792, 5553, 5756, 3274, 4517, 2159, 1467, 3734, 7447, 4094, 3447, 8386, 2729, 4596, 9943, 4354, 8745, 5288, 1872, 4575, 8023, 8927, 438, 9124, 7381, 7332, 4126, 9262, 3428, 8997, 8762, 2172, 2665, 9926, 3604, 7648, 5240, 4000, 5397, 7278, 4410, 2873, 3587, 2572, 2979, 5294, 1451, 7038, 2900, 3552, 5920, 239, 9422, 9323, 6720, 2566, 4079, 151, 4861, 1158, 2719, 9796, 9423, 2349, 9888, 6588, 1852, 1947, 1286, 3906, 523, 2612, 3399, 1787, 8358, 3054, 4650, 3705, 4435, 6752, 2987, 8361, 3457, 6004, 7896, 2095, 1455, 8966, 2470, 1389, 6539, 4555, 131, 197, 4212, 9701, 2506, 9981, 5047, 7453, 3048, 5815, 4104, 6693, 4061, 29, 3017, 6886, 7713, 7189, 630, 476, 3832, 486, 3673, 6413, 6398, 3202, 731, 364, 1624, 5365, 1217, 560, 2549, 8605, 1157, 5347, 8778, 4121, 8456, 7520, 8303, 8884, 4839, 809, 3776, 4048, 6971, 9297, 2844, 529, 3599, 6285, 1782, 7601, 2707, 5807, 6698, 640, 8454, 180, 528, 7300, 6474, 8993, 7399, 5884, 9768, 2050, 3430, 2874, 585, 2261, 6419, 9941, 4481, 7548, 8580, 721, 1662, 5154, 1169, 6526, 5895, 8420, 5873, 9653, 2882, 9669, 7027, 2947, 3305, 581, 8492, 1253, 5716, 3715, 5665, 4189, 2807, 4925, 1285, 969, 248, 2530, 1218, 2023, 5112, 5839, 2734, 6012, 6709, 7310, 4413, 3754, 1129, 3589};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
