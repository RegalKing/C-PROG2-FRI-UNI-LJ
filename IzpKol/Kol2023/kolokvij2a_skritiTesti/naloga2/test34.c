#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {697, 8244, 6453, 7232, 7629, 857, 8903, 4211, 8449};
int _B[] = {9823, 9048, 1356, 7881, 9403, 7337, 5350, 4293, 7651, 8605, 2077, 2545, 4355, 7205, 7586, 5655, 9270, 8277, 669, 2624, 6866, 3595, 4758, 3836, 3330, 1663, 5589, 7693, 4392, 4094, 6761, 8867, 4109, 9724, 2480, 7629, 2893, 1760, 4321, 1299, 5592, 4656, 4367, 9916, 4117, 2650, 9742, 5817, 9697, 157, 7953, 8457, 4804, 4021, 8737, 2508, 5963, 4074, 7579, 896, 3223, 7542, 5434, 5801, 8802, 7688, 5338, 3401, 5098, 1638, 1433, 5700, 618, 2458, 8618, 2260, 2515, 869, 4783, 8215, 3450, 2780, 228, 5187, 6394, 1565, 8808, 3186, 6221, 7422, 8838, 9951, 8242, 2707, 3408, 6741, 4048, 6505, 9903, 7520, 2937, 1744, 5217, 7482, 5697, 2855, 4530, 1512, 6368, 2715, 6230, 6197, 6031, 2090, 1520, 3704, 6356, 6236, 1163, 2394, 4623, 8674, 412, 388, 7852, 5949, 1075, 6704, 2093, 8601, 1188, 2829, 5529, 1424, 7885, 7481, 5678, 6765, 7575, 9100, 5602, 7080, 4890, 754, 4149, 6618, 9694, 2666, 2361, 8083, 2419, 2120, 9396, 1391, 4821, 8436, 3867, 5273, 9899, 7060, 2979, 3688, 2916, 6918, 9241, 172, 3908, 8996, 5625, 5404, 7620, 126, 8050, 4545, 8840, 7314, 3600, 4499, 9492, 9965, 2059, 3791, 9371, 5384, 5675, 2689, 2513, 5340, 3626, 3550, 373, 9233, 7420, 1998, 2031, 1462, 7306, 4773, 1792, 8892, 5438, 5129, 8675, 6549, 4662, 1839, 681, 6759, 3585, 8379, 3445, 3972, 8160, 4336, 4359, 5935, 693, 8130, 1972, 4209, 9116, 4471, 2805, 7218, 8252, 770, 4218, 8718, 253, 1309, 3976, 6477, 5584, 7899, 2466, 9242, 7654, 4037, 5642, 5692, 5476, 5750, 8490, 3349, 5773, 1977, 394, 7954, 8531, 627, 5627, 8862, 5572, 1380, 5180, 8835, 2831, 4311, 6544, 7016, 1009, 2048, 3123, 9667, 3892, 7087, 400, 9245, 8390, 3294, 6036, 7447, 2398, 4376, 5924, 51, 72, 3999, 9670, 714, 8412, 5768, 158, 9456, 807, 3268, 8468, 4137, 5996, 2356, 2451, 9200, 3866, 817, 6355, 6070, 5882, 2110, 9534, 6039, 1971, 2808, 9443, 8913, 9340, 4867, 9354, 644, 8714, 6386, 5537, 6981, 9166, 4570, 5611, 9946, 8072, 1411, 9573, 9288, 3815, 4874, 610, 4825, 232, 8686, 8065, 2178, 6123, 366, 956, 7240, 9197, 7733, 423, 7136, 5405, 2585, 849, 8766, 1100, 2602, 4309, 4827, 6907, 3812, 247, 6118, 2384, 3625, 8677, 5494, 3850, 9728, 8936, 6296, 2280, 8043, 6374, 3944, 3551, 7458, 2255, 1388, 6521, 6196, 2604, 6381, 608, 4777, 8920, 505, 3055, 3157, 9927, 5711, 7597, 5366, 9029, 3165, 8085, 1992, 9399, 8656, 9957, 2498, 7580, 702, 3785, 4517, 3952, 2276, 5965, 325, 4422, 7812, 8015, 1594, 7264, 1892, 4638, 3770, 6033, 6885, 1592, 347, 9674, 6311, 2909, 437, 3498, 3395, 7555, 6173, 2504, 9953, 3864, 3660, 3088, 2638, 8904, 3481, 1338, 9936, 1390, 970, 2372, 4098, 8274, 6852, 6743, 342, 6058, 5425, 9604, 3044, 8230, 178, 6154, 985, 5065, 359, 1301, 7426, 3413, 34, 3120, 7459, 2900, 1310, 5618, 5023, 1418, 8826, 8008, 2759, 3993, 5891, 6837, 242, 8079, 8561, 1216, 9705, 7215, 3801, 7039, 4210, 7460, 4852, 3680, 2796, 937, 6048, 3421, 3947, 4875, 3246, 2322, 1397, 6861, 8668, 5478, 9605, 9844, 147, 2952, 8126, 7056, 7202, 3189, 8648, 8664, 4114, 4314, 655, 1574, 1814, 4983, 6081, 6533, 1312, 8453, 8254, 8817, 4181, 4386, 4135, 529, 2672, 3036, 4519, 2338, 3573, 3737, 2128, 7043, 8927, 6833, 9706, 2849, 7053, 5226, 7315, 1873, 7350, 9974, 8093, 2667, 1279, 5275, 3085, 6100, 2193, 538, 839, 7285, 156, 4829, 5100, 1471, 1339, 4330, 5230, 336, 9643, 7232, 7705, 4451, 7955, 2261, 3800, 703, 8589, 8325, 8329, 9835, 4891, 7360, 2156, 6948, 533, 5289, 6453, 2989, 9888, 5897, 4873, 2887, 3030, 4324, 8086, 4222, 7489, 8244, 2252, 1405, 9307, 139, 4602, 7778, 9498, 7271, 750, 7157, 5086, 7906, 8361, 2360, 6807, 6284, 5805, 6778, 1029, 8284, 5311, 7237, 3161, 6904, 609, 2648, 9181, 6537, 773, 8592, 6271, 8143, 3217, 6623, 2872, 2941, 1603, 8116, 3423, 7394, 66, 7436, 6880, 6853, 1326, 75, 1121, 843, 9508, 7158, 3152, 5386, 275, 5380, 3486, 8919, 4329, 1288, 6071, 8002, 9379, 1860, 1376, 2924, 5796, 8643, 6992, 4808, 9580, 1557, 9327, 2288, 7144, 9732, 5557, 4547, 678, 1555, 8635, 6334, 8626, 765, 3579, 9291, 7969, 5976, 8778, 2540, 9128, 5992, 7201, 6228, 2642, 7532, 938, 8450, 6550, 1358, 5324, 2953, 7159, 8110, 6045, 3574, 3673, 8273, 9590, 1172, 2734, 8511, 4651, 1240, 3286, 4956, 7250, 7107, 8461, 2064, 8971, 4959, 7682, 4357, 3287, 6315, 9198, 3597, 9866, 8644, 7689, 4215, 9614, 4677, 2295, 2470, 4989, 6934, 3416, 7454, 5123, 1065, 624, 407, 3991, 7130, 5352, 4077, 7491, 5139, 5702, 9350, 8624, 7284, 8871, 7180, 3210, 9258, 6801, 7320, 396, 116, 1697, 4682, 4710, 3560, 8241, 7534, 4742, 7342, 3567, 9084, 8739, 6206, 8430, 1455, 3004, 40, 1105, 6873, 8651, 5191, 1327, 5347, 3624, 7187, 3253, 7219, 2207, 5250, 631, 2264, 9725, 3046, 4693, 687, 1474, 9436, 8016, 6223, 3446, 9482, 9322, 9180, 2026, 8426, 3555, 4295, 8092, 5582, 8163, 2526, 2923, 2726, 3493, 313, 9183, 9986, 74, 2881, 8423, 410, 2531, 4927, 7296, 588, 1371, 6348, 8992, 4258, 9421, 9507, 9551, 2229, 7480, 912, 1631, 5183, 7939, 6373, 4133, 9205, 1410, 9780, 3237, 4648, 4296, 8746, 4993, 7737, 3520, 6312, 4911, 7940, 3897, 4687, 3462, 6771, 8640, 1698, 501, 7847, 7417, 4788, 341, 6832, 9564, 6428, 7003, 5377, 2500, 4692, 5940, 9942, 1330, 3716, 3784, 8166, 3845, 8268, 3063, 7901, 351, 9914, 6878, 9872, 1635, 5749, 4491, 4796, 704, 8137, 6116, 9859, 6727, 6345, 9061, 4587, 5313, 2021, 4212, 622, 5554, 2783, 1482, 8903, 7709, 1775, 4761, 2495, 7848, 6378, 271, 3310, 7005, 387, 8596, 9654, 7212, 1177, 8967, 3898, 8751, 1079, 7933, 5496, 6621, 6038, 8709, 6325, 4542, 361, 5475, 9650, 541, 98, 7976, 7023, 1627, 1790, 6436, 8769, 5449, 7644, 6573, 1675, 9252, 7677, 6032, 3513, 4644, 9521, 3545, 5567, 8409, 9913};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
