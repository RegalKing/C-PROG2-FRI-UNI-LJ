#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {4636, 6584, 2698, 8394, 3295, 4951, 2881, 7467, 6179, 8165, 2906, 2234, 6943, 8044, 5284, 5240, 174, 6233, 1575, 8599, 1920, 2826, 1194, 8711, 9134, 4534, 3528, 4767, 3593, 5602, 683, 3813, 9221, 2771, 3406, 8987, 2231, 3875, 4324, 8078, 7735, 7823, 6789, 1614, 3072, 2825, 7481, 7139, 1837, 7851, 944, 5921, 901, 9227, 574, 6667, 3423, 2972, 809, 934, 180, 8498, 3920, 6247, 2310, 3861, 5620, 5826, 5761, 9997, 8681, 9217, 3929, 5975, 374, 4031, 3779, 5523, 8196, 2274, 8254, 1944, 6579, 3427, 5793, 4019, 9077, 9320, 1175, 5529, 6470, 2575, 5552, 509, 7921, 6722, 1785, 8746, 4729, 9128, 9008, 2800, 1509, 7313, 3333, 6755, 8603, 3938, 704, 7115, 6207, 9916, 4910, 4521, 1857, 332, 3306, 5490, 4347, 1402, 2069, 3598, 2524, 2998, 497, 1881, 6264, 3040, 6761, 2790, 8670, 398, 8619, 8658, 5220, 8661, 5657, 6945, 5134, 7443, 9, 5851, 7560, 9208, 4747, 746, 6601, 3015, 7717, 3331, 9601, 4335, 9655, 3301, 7520, 4920, 1271, 7207, 3748, 9232, 555, 1929, 9958, 9920, 8749, 5712, 9945, 8480, 5711, 7373, 1202, 2236, 6719, 7555, 8293, 2858, 9103, 5775, 4906, 5915, 8391, 3375, 4976, 4274, 3576, 5376, 1137, 2748, 2056, 9972, 1245, 1315, 4857, 8598, 7941, 1406, 883, 9231, 5327, 8815, 6963, 7822, 538, 8225, 8739, 7949, 183, 1961, 8262, 3613, 4625, 8340, 4802, 6074, 5406, 1787, 2285, 684, 4309, 3607, 9238, 9728, 6087, 9390, 6560, 4615, 3521, 8566, 1012, 1472, 2976, 4994, 9251, 4486, 1992, 9380, 5458, 7176, 9027, 8175, 6465, 8635, 5488, 5813, 3557, 1299, 175, 5658, 8728, 6650, 9993, 1798, 719, 2682, 6876, 5367, 8522, 5338, 8109, 4778, 6221, 6058, 7719, 9363, 1285, 159, 9718, 9522, 5187, 2276, 8445, 2408, 6675, 859, 1461, 4817, 1198, 4337, 936, 850, 8729, 3442, 5044, 1040, 9315, 3868, 8610, 1185, 7543, 6478, 2102, 7004, 3755, 2324, 9204, 3439, 9073, 2562, 8708, 3981, 687, 4326, 6782, 4502, 7013, 1381, 8456, 4541, 284, 553, 1379, 5429, 6812, 1550, 1926, 4914, 5908, 6552, 7124, 5661, 3840, 8453, 4205, 5341, 7401, 9798, 3737, 6196, 9802, 7793, 7429, 7623, 6254, 2337, 5809, 7260, 1995, 9496, 1904, 4368, 7654, 2749, 355, 2750, 1036, 5769, 6304, 9648, 7318, 2172, 6660, 9451, 5046, 6095, 8755, 5640, 4321, 3515, 4436, 744, 2916, 6137, 6931, 3146, 2284, 5562, 4833, 4424, 2353, 4750, 723, 8856, 4758, 3764, 1116, 2498, 5781, 4431, 5730, 8333, 3508, 8524, 2631, 3784, 9777, 4529, 6118, 9839, 6495, 9757, 5479, 2697, 7007, 7397, 7789, 9770, 4181, 7777, 4891, 2664, 7445, 7994, 3454, 5435, 9538, 8982, 9148, 1222, 8864, 655, 6753, 6265, 9372, 8577, 2241, 8496, 9253, 9922, 6185, 5047, 8049, 9645, 3148, 9413, 9686, 6693, 871, 9423, 2857, 9318, 9218, 599, 4862, 7809, 4024, 7880, 1838, 7798, 5951, 3639, 1549, 682, 8384, 9281, 6136, 707, 5423, 9634, 1790, 4375, 3550, 2805, 899, 2401, 9411, 9748, 4117, 5082, 7325, 9741, 7019, 8036, 3906, 9625, 7148, 7712, 9468, 209, 5952, 5354, 7524, 5158, 5791, 695, 6712, 965, 4646, 3524, 4726, 9523, 6453, 3312, 1789, 2604, 9280, 8084, 2466, 7365, 3504, 560, 467, 2203, 4426, 4155, 8645, 4314, 6524, 3077, 8137, 5378, 5723, 9139, 573, 194, 1386, 8349, 9565, 955, 6672, 5923, 7360, 3226, 8601, 132, 3065, 6862, 6333, 733, 2876, 3852, 2618, 6533, 8058, 9599, 2303, 43, 837, 5235, 5456, 213, 2458, 1970, 2312, 4869, 3119, 8428, 2058, 3513, 1724, 9731, 750, 4344, 1896, 1885, 2186, 6843, 6408, 102, 4887, 3571, 8568, 5609, 3173, 8870, 1584, 9527, 1412, 5348, 5072, 2229, 2504, 4605, 8934, 6566, 4365, 2159, 676, 6598, 8631, 1673, 3754, 8725, 4423, 294, 3982, 15, 6528, 388, 2669, 2692, 7515, 2065, 3726, 7323, 2747, 8697, 6841, 5001, 6288, 4525, 5487, 3965, 3529, 3527, 9507, 8060, 1611, 3493, 2334, 2579, 9063, 7444, 251, 1301, 2237, 8874, 121, 6521, 9096, 7750, 4511, 5969, 8766, 8381, 9258, 9003, 6412, 3680, 4073, 1950, 8562, 4837, 6732, 1822, 4063, 135, 1395, 6429, 9786, 9602, 6587, 9499, 2051, 4329, 5085, 8303, 7093, 6154, 9751, 3352, 264, 8461, 5624, 6003, 7575};
int _B[] = {3331, 1669, 6931, 9148, 4131, 5525, 8498, 1386, 8508, 1798, 8467, 5884, 9175, 6999, 6563, 1828, 4913, 5635, 5593, 3071, 5569, 2385, 2905, 9752, 7976, 3405, 285, 457, 3204, 4462, 2686, 9606, 9803, 4758, 6980, 2631, 4081, 2872, 9259, 1008, 5624, 5676, 8981, 4527, 3873, 2057, 7716, 4125, 9140, 3853, 2251, 8109, 5001, 6552, 1056, 5089, 6154, 1231, 320, 7489, 8207, 909, 3305, 7837};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
