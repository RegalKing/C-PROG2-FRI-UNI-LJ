#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga2.h"

#define _M 10001

int _A[] = {1409, 2161, 4579, 7980, 1352, 1052, 3744, 4118, 4695, 1256, 9941, 3346, 6411, 4157, 2569, 573, 4894, 2117, 6471, 5995, 1866, 2378, 3224, 9019, 6236, 824, 1216, 3890, 1084, 9985, 1428, 7690, 7003, 2165, 7339, 7722, 6591, 6816, 7201, 3648, 5869, 9533, 8857, 6369, 9574, 3934, 615, 6546, 3849, 4371, 2723, 538, 8814, 2635, 5156, 3110, 8012, 3692, 7254, 4185, 1922, 7104, 41, 5852, 545, 5632, 7991, 4844, 1307, 1666, 1714, 6325, 7449, 5911, 5554, 9303, 6923, 580, 1312, 2651, 5456, 7161, 1410, 6015, 652, 6353, 6592, 4521, 4914, 7004, 4861, 3720, 2582, 8128, 6469, 6563, 9551, 510, 6183, 8883, 7888, 2581, 9202, 795, 2133, 9736, 8107, 3515, 1556, 764, 2903, 4418, 3517, 1414, 333, 3721, 6379, 3203, 6118, 6662, 5965, 9572, 4742, 9944, 4161, 4566, 9375, 9619, 2494, 1694, 319, 2265, 9395, 1558, 2562, 3323, 2762, 4122, 5298, 5434, 4932, 9108, 4780, 6181, 850, 3070, 1576, 7205, 6891, 4802, 2831, 6825, 1285, 1961, 247, 8906, 6278, 4910, 5379, 398, 2270, 774, 7711, 3095, 1403, 6457, 1844, 8095, 811, 8465, 2215, 4021, 9597, 5813, 9163, 692, 8803, 1430, 2211, 8412, 5517, 8363, 7356, 1899, 5905, 3846, 8271, 5833, 4577, 5403, 8761, 2344, 9065, 8792, 7052, 3954, 1373, 9837, 584, 8907, 7190, 3490, 5249, 8696, 6339, 1424, 6350, 170, 6293, 6510, 4846, 116, 4558, 8634, 6535, 4451, 3667, 1654, 8492, 1514, 107, 179, 9024, 9500, 5232, 1953, 3883, 3471, 2248, 5209, 358, 7116, 4307, 4983, 5747, 901, 7203, 7115, 3081, 1248, 1975, 7125, 2118, 2106, 7222, 6786, 3881, 6256, 4425, 7261, 8718, 6154, 7745, 3623, 6613, 688, 4660, 3854, 2883, 418, 4073, 4919, 7707, 6312, 6515, 2170, 3411, 4569, 630, 6930, 5085, 7304, 5549, 5695, 8937, 6850, 5561, 9063, 6286, 4278, 5428, 6384, 3125, 2256, 2987, 830, 5822, 1900, 3273, 3482, 6166, 8125, 6650, 4835, 1671, 2959, 9892, 6677, 8554, 1110, 509, 8210, 9590, 2258, 2247, 8547, 4820, 3408, 4720, 1742, 5478, 121, 2971, 6237, 8100, 5945, 1695, 532, 2877, 6917, 963, 8830, 9865, 14, 7982, 7679, 7524, 2929, 50, 3634, 456, 28, 7802};
int _B[] = {3520, 4511, 6631, 7707, 1411, 1892, 8814, 8360, 4588, 6104, 5799, 7722, 5298, 1294, 1428, 1992, 7261, 9985, 3163, 2971, 4161, 6278, 811, 428, 6515, 5478, 4802, 552, 1654, 8095, 4451, 1310, 6326, 4820, 2762, 9063, 6706, 3710, 6469, 6286, 3846, 9409, 1392, 3881, 2378, 7662, 5379, 6165, 8101, 621, 3720, 606, 1023, 6615, 6411, 2117, 2265, 5852, 2085, 3378, 5905, 8937, 9892, 5927, 4122, 1697, 8371, 112, 2161, 3354, 4521, 7203, 9108, 8672, 121, 1695, 3849, 7052, 3679, 4921, 2651, 8554, 2582, 9619, 8883, 5995, 9395, 2170, 4726, 5728, 1961, 2256, 2023, 391, 418, 5969, 3273, 8018, 5085, 969, 2649, 9008, 8217, 8965, 2379, 4358, 8571};
Vozlisce* _I2A[_M];
Vozlisce* _I2B[_M];

Vozlisce* _izTabele(int* t, int n, Vozlisce** i2v) {
    if (n == 0) {
        return NULL;
    }
    Vozlisce* v = malloc(sizeof(Vozlisce));
    v->podatek = *t;
    i2v[*t] = v;
    v->naslednje = _izTabele(t + 1, n - 1, i2v);
    return v;
}

void _izpisi(Vozlisce* v) {
    printf("[");
    Vozlisce* w = v;
    while (w != NULL) {
        printf("%s%d", (w == v ? "" : ", "), w->podatek);
        w = w->naslednje;
    }
    printf("]\n");
}

void _istovetnost(Vozlisce* v, Vozlisce** i2v) {
    for (Vozlisce* w = v; w != NULL; w = w->naslednje) {
        printf("%d", w == i2v[w->podatek]);
    }
    printf("\n");
}

void _pocisti(Vozlisce* v) {
    if (v != NULL) {
        _pocisti(v->naslednje);
        free(v);
    }
}

int main() {
    Vozlisce* a = _izTabele(_A, sizeof(_A) / sizeof(int), _I2A);
    Vozlisce* b = _izTabele(_B, sizeof(_B) / sizeof(int), _I2B);

    printf("Prej:\n");
    _izpisi(a);
    _izpisi(b);
    printf("\n");

    Vozlisce* na = NULL;
    Vozlisce* nb = NULL;
    izlociSkupne(a, b, &na, &nb);

    printf("Potem:\n");
    _izpisi(na);
    _izpisi(nb);
    printf("\n");

    printf("Istovetnost ohranjenih vozlisc:\n");
    _istovetnost(na, _I2A);
    _istovetnost(nb, _I2B);

    _pocisti(na);
    _pocisti(nb);

    return 0;
}
